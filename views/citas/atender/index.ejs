<% include  ../../view_distribution/top1.ejs%>
<script src="https://cdn.jsdelivr.net/npm/signature_pad@2.3.2/dist/signature_pad.min.js"></script>
<style>
    input:disabled,
    textarea:disabled {
        color: #303030 !important
    }
</style>
<style type="text/css">
    @import url(https://fonts.googleapis.com/css?family=Raleway:400,900);
    body{
      color: #333;
    }
    header h1{
      text-align: center;
      font-weight: bold;
      margin-top: 0;
    }
      
     header p{
       text-align: center;
       margin-bottom: 0;
     }
    .hexa{
      border: 0px;
      float: left;
      text-align: center;
      height: 35px;
      width: 60px;
      font-size: 22px;
      background: #f0f0f0;
      color: #3c3c3c;
      position: relative;
      margin-top: 15px;
    }
    .hexa:before{
      content: ""; 
      position: absolute; 
      left: 0; 
      width: 0; 
      height: 0;
      border-bottom: 15px solid #f0f0f0;
      border-left: 30px solid transparent;
      border-right: 30px solid transparent;
      top: -15px;
    }
    .hexa:after{
      content: ""; 
      position: absolute; 
      left: 0; 
      width: 0; 
      height: 0;
      border-left: 30px solid transparent;
      border-right: 30px solid transparent;
      border-top: 15px solid #f0f0f0;
      bottom: -15px;
    }
    .timeline {
      position: relative;
      padding: 0;
      width: 100%;
      margin-top: 20px;
      list-style-type: none;
    }
    .timeline:before {
      position: absolute;
      left: 50%;
      top: 0;
      content: ' ';
      display: block;
      width: 2px;
      height: 100%;
      margin-left: -1px;
      background: rgb(213,213,213);
      background: -moz-linear-gradient(top, rgba(213,213,213,0) 0%, rgb(213,213,213) 8%, rgb(213,213,213) 92%, rgba(213,213,213,0) 100%);
      background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(30,87,153,1)), color-stop(100%,rgba(125,185,232,1)));
      background: -webkit-linear-gradient(top, rgba(213,213,213,0) 0%, rgb(213,213,213) 8%, rgb(213,213,213) 92%, rgba(213,213,213,0) 100%);
      background: -o-linear-gradient(top, rgba(213,213,213,0) 0%, rgb(213,213,213) 8%, rgb(213,213,213) 92%, rgba(213,213,213,0) 100%);
      background: -ms-linear-gradient(top, rgba(213,213,213,0) 0%, rgb(213,213,213) 8%, rgb(213,213,213) 92%, rgba(213,213,213,0) 100%);
      background: linear-gradient(to bottom, rgba(213,213,213,0) 0%, rgb(213,213,213) 8%, rgb(213,213,213) 92%, rgba(213,213,213,0) 100%);
      z-index: 5;
    }
    .timeline li {
      padding: 2em 0;
    }
    .timeline .hexa{
      width: 16px;
      height: 10px;
      position: absolute;
      background: #00c4f3;
      z-index: 5;
      left: 0;
      right: 0;
      margin-left:auto;
      margin-right:auto;
      top: -30px;
      margin-top: 0;
    }
    .timeline .hexa:before {
      border-bottom: 4px solid #00c4f3;
      border-left-width: 8px;
      border-right-width: 8px;
      top: -4px;
    }
    .timeline .hexa:after {
      border-left-width: 8px;
      border-right-width: 8px;
      border-top: 4px solid #00c4f3;
      bottom: -4px;
    }
    .direction-l,
    .direction-r {
      float: none;
      width: 100%;
      text-align: center;
    }
    .flag-wrapper {
      text-align: center;
      position: relative;
    }
    .flag {
      position: relative;
      display: inline;
      background: rgb(255,255,255);
      font-weight: 600;
      z-index: 15;
      padding: 6px 10px;
      text-align: left;
      border-radius: 5px;
    }
    .direction-l .flag:after,
    .direction-r .flag:after {
      content: "";
      position: absolute;
      left: 50%;
      top: -15px;
      height: 0;
      width: 0;
      margin-left: -8px;
      border: solid transparent;
      border-bottom-color: rgb(255,255,255);
      border-width: 8px;
      pointer-events: none;
    }
    .direction-l .flag {
      -webkit-box-shadow: -1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
      -moz-box-shadow: -1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
      box-shadow: -1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
    }
    .direction-r .flag {
      -webkit-box-shadow: 1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
      -moz-box-shadow: 1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
      box-shadow: 1px 1px 1px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.15);
    }
    .time-wrapper {
      display: block;
      position: relative;
      margin: 4px 0 0 0;
      z-index: 14;
      line-height: 1em;
      vertical-align: middle;
      color: #fff;
    }
    .direction-l .time-wrapper {
      float: none;
    }
    .direction-r .time-wrapper {
      float: none;
    }
    .time {
      background: #00c4f3;
      display: inline-block;
      padding: 8px;
    }
    .desc {
      position: relative;
      margin: 1em 0 0 0;
      padding: 1em;
      background: rgb(254,254,254);
      -webkit-box-shadow: 0 0 1px rgba(0,0,0,0.20);
      -moz-box-shadow: 0 0 1px rgba(0,0,0,0.20);
      box-shadow: 0 0 1px rgba(0,0,0,0.20);
      z-index: 15;
    }
    .direction-l .desc,
    .direction-r .desc {
      position: relative;
      margin: 1em 1em 0 1em;
      padding: 1em;
      z-index: 15;
    }
    @media(min-width: 768px){
      .timeline {
        width: 660px;
        margin: 0 auto;
        margin-top: 20px;
      }
      .timeline li:after {
        content: "";
        display: block;
        height: 0;
        clear: both;
        visibility: hidden;
      }
      
      .timeline .hexa {
        left: -28px;
        right: auto;
        top: 8px;
      }
      .timeline .direction-l .hexa {
        left: auto;
        right: -28px;
      }
      .direction-l {
        position: relative;
        width: 310px;
        float: left;
        text-align: right;
      }
      .direction-r {
        position: relative;
        width: 310px;
        float: right;
        text-align: left;
      }
      .flag-wrapper {
        display: inline-block;
      }
      
      .flag {
        font-size: 18px;
      }
      .direction-l .flag:after {
        left: auto;
        right: -16px;
        top: 50%;
        margin-top: -8px;
        border: solid transparent;
        border-left-color: rgb(254,254,254);
        border-width: 8px;
      }
      .direction-r .flag:after {
        top: 50%;
        margin-top: -8px;
        border: solid transparent;
        border-right-color: rgb(254,254,254);
        border-width: 8px;
        left: -8px;
      }
      .time-wrapper {
        display: inline;
        vertical-align: middle;
        margin: 0;
      }
      .direction-l .time-wrapper {
        float: left;
      }
      .direction-r .time-wrapper {
        float: right;
      }
      .time {
        padding: 5px 10px;
      }
      .direction-r .desc {
        margin: 1em 0 0 0.75em;
      }
    }
    @media(min-width: 992px){
      .timeline {
        width: 800px;
        margin: 0 auto;
        margin-top: 20px;
      }
      .direction-l {
        position: relative;
        width: 380px;
        float: left;
        text-align: right;
      }
      .direction-r {
        position: relative;
        width: 380px;
        float: right;
        text-align: left;
      }
    }
        #eventConsulta {
            border: 1px dotted black;
            border-radius: 2px;
        }
        p {
        text-transform: capitalize;
        font-family:Verdana, Geneva, Tahoma, sans-serif;
        font-weight: bold;
        }
        .textoDiv {
            margin: 0;
            display: inline-block;
        }
        button {
            float: right;
        }
    
    .fc-content td:hover {
        background: #adf4fa;
    }

    .btn-flotante {
        font-size: 16px; /* Cambiar el tama√±o de la tipografia */
        text-transform: uppercase; /* Texto en mayusculas */
        font-weight: bold; /* Fuente en negrita o bold */
        color: #ffffff; /* Color del texto */
        border-radius: 5px; /* Borde del boton */
        letter-spacing: 2px; /* Espacio entre letras */
        background-color: #E91E63; /* Color de fondo */
        padding: 18px 30px; /* Relleno del boton */
        position: fixed;
        bottom: 40px;
        right: 40px;
        transition: all 300ms ease 0ms;
        box-shadow: 0px 8px 15px rgba(0, 0, 0, 0.1);
        z-index: 99;
    }
    .btn-flotante:hover {
        background-color: #2c2fa5; /* Color de fondo al pasar el cursor */
        box-shadow: 0px 15px 20px rgba(0, 0, 0, 0.3);
        transform: translateY(-7px);
    }
    @media only screen and (max-width: 600px) {
        .btn-flotante {
            font-size: 14px;
            padding: 12px 20px;
            bottom: 20px;
            right: 20px;
        }
    }

    html { font-family:Calibri, Arial, Helvetica, sans-serif; font-size:11pt; background-color:white }
      a.comment-indicator:hover + div.comment { background:#ffd; position:absolute; display:block; border:1px solid black; padding:0.5em }
      a.comment-indicator { background:red; display:inline-block; border:1px solid black; width:0.5em; height:0.5em }
      div.comment { display:none }
      table { border-collapse:collapse; page-break-after:always }
      .gridlines td { border:1px dotted black }
      .gridlines th { border:1px dotted black }
      .b { text-align:center }
      .e { text-align:center }
      .f { text-align:right }
      .inlineStr { text-align:left }
      .n { text-align:right }
      .s { text-align:left }
      td.style0 { vertical-align:bottom; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style0 { vertical-align:bottom; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style1 { vertical-align:middle; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style1 { vertical-align:middle; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style2 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:2px solid #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style2 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:2px solid #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style3 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:2px solid #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style3 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:2px solid #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style4 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style4 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:2px solid #CCCCCC !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style5 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style5 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style6 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style6 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style7 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style7 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style8 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style8 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style9 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style9 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style10 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      th.style10 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#D9D9D9 }
      td.style11 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style11 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style12 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style12 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style13 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style13 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style14 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style14 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style15 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style15 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style16 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style16 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style17 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style17 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style18 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style18 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style19 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style19 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style20 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style20 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style21 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style21 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style22 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style22 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style23 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      th.style23 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      td.style24 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      th.style24 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      td.style25 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      th.style25 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:8pt; background-color:#FFFFFF }
      td.style26 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style26 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style27 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style27 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style28 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style28 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style29 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style29 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style30 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style30 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style31 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style31 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style32 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style32 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style33 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style33 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style34 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style34 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style35 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style35 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style36 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style36 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style37 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style37 { vertical-align:middle; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style38 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style38 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style39 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style39 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style40 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style40 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style41 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style41 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style42 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style42 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style43 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style43 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style44 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style44 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style45 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style45 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style46 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style46 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style47 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style47 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style48 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style48 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style49 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style49 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style50 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style50 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style51 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style51 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style52 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style52 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style53 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style53 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style54 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style54 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style55 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style55 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style56 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style56 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style57 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style57 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style58 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style58 { vertical-align:middle; border-bottom:none #000000; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style59 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style59 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style60 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style60 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style61 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style61 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style62 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style62 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style63 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style63 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style64 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style64 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style65 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style65 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style66 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style66 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style67 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style67 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style68 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style68 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style69 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style69 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style70 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style70 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style71 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style71 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style72 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style72 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style73 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style73 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style74 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style74 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style75 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style75 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style76 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style76 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style77 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style77 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style78 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style78 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style79 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style79 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style80 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style80 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style81 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style81 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style82 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      th.style82 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
      td.style83 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style83 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style84 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style84 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style85 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style85 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style86 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style86 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style87 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style87 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style88 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      th.style88 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFFFF }
      td.style89 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style89 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style90 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style90 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style91 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      th.style91 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:#FFFFFF }
      td.style92 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style92 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style93 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style93 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      td.style94 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      th.style94 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
      table.sheet0 col.col0 { width:42pt }
      table.sheet0 col.col1 { width:42pt }
      table.sheet0 col.col2 { width:42pt }
      table.sheet0 col.col3 { width:42pt }
      table.sheet0 col.col4 { width:42pt }
      table.sheet0 col.col5 { width:42pt }
      table.sheet0 col.col6 { width:42pt }
      table.sheet0 col.col7 { width:42pt }
      table.sheet0 col.col8 { width:42pt }
      table.sheet0 col.col9 { width:42pt }
      table.sheet0 col.col10 { width:42pt }
      table.sheet0 col.col11 { width:42pt }
      table.sheet0 col.col12 { width:42pt }
      table.sheet0 col.col13 { width:42pt }
      table.sheet0 col.col14 { width:42pt }
      table.sheet0 tr { height:15pt }
      table.sheet0 tr.row0 { height:15.75pt }
      table.sheet0 tr.row1 { height:15.75pt }
      table.sheet0 tr.row2 { height:16.5pt }
      table.sheet0 tr.row3 { height:15.75pt }
      table.sheet0 tr.row4 { height:15.75pt }
      table.sheet0 tr.row5 { height:16.5pt }
      table.sheet0 tr.row6 { height:51pt }
      table.sheet0 tr.row7 { height:38.25pt }
      table.sheet0 tr.row8 { height:25.5pt }
      table.sheet0 tr.row9 { height:15.75pt }
      table.sheet0 tr.row10 { height:15.75pt }
      table.sheet0 tr.row11 { height:15.75pt }
      table.sheet0 tr.row12 { height:25.5pt }
      table.sheet0 tr.row13 { height:38.25pt }
      table.sheet0 tr.row14 { height:38.25pt }
      table.sheet0 tr.row15 { height:63.75pt }
      table.sheet0 tr.row16 { height:38.25pt }
      table.sheet0 tr.row17 { height:63.75pt }
      table.sheet0 tr.row18 { height:38.25pt }
      table.sheet0 tr.row19 { height:15.75pt }
      table.sheet0 tr.row21 { height:15.75pt }
      table.sheet0 tr.row22 { height:15.75pt }
      table.sheet0 tr.row23 { height:25.5pt }
      table.sheet0 tr.row24 { height:25.5pt }
      table.sheet0 tr.row25 { height:25.5pt }
      table.sheet0 tr.row26 { height:25.5pt }
      table.sheet0 tr.row27 { height:25.5pt }
      table.sheet0 tr.row28 { height:15.75pt } 
</style>


<% include  ../../view_distribution/top2.ejs%>
<% include  ../../view_distribution/sidebar-left.ejs%>
<%
    const formulario = HistoriaClinica.formulario
    const servicio = HistoriaClinica.Servicio
    const paciente = HistoriaClinica.Paciente[0]
    const profesional = Cita.Profesional
    const HC_datos = HistoriaClinica.datos_formulario 
    const datos_sesion = HistoriaClinica.datos_sesion
    const sede_id = HistoriaClinica.Sede._id
    const datos_selectores = HistoriaClinica.datos_selectores 
%>

<input type="hidden" id="sede_id" value="<%= HistoriaClinica.Sede._id %>">
<input type="hidden" id="hc_id" value="<%= HistoriaClinica._id %>">
<input type="hidden" id="paciente_id" value="<%= paciente._id %>">
<input type="hidden" id="profesional_id" value="<%= profesional._id %>">
<input type="hidden" id="cita_id" value="<%= HistoriaClinica.Cita._id %>">


<%
if(sede_id == '60049afed00d9b43a49e4da7'){ %>
    <section id="content" oncopy="return false" onpaste="return false">
<% } else{ %>
    <section id="content">
<% } %>

    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="row">
                <div class="col s6">
                <h3 class="breadcrumbs-title"><%= title%></h3>  
                </div>    
                    <div class="col s6">
                        <p>Selecione Una fecha Para ir a otra sesion</p>
                        <select name="" id="data_historia">
                            <option value="" disabled >Selecione una fecha de la cita</option>
                        </select>
                    </div>
                </div>                      
                   <% if(sede_id == '60049afed00d9b43a49e4da7'){ %>
                    <% }else{ %>
                    <% if (HistoriaClinica.cerrado == true ) { %>
                    <a href="/historias-clinicas/impresion?historia=<%= HistoriaClinica._id %>" target="_blank"
                        class="btn-floating btn-large waves-effect waves-light right green" dis><i
                            class="material-icons">print</i></a>
                    <% } %>
                    <% } %>          
                <ul class="collapsible popout" data-collapsible="expandable">
                    <li>
                        <% if (HistoriaClinica.cerrado != true ) { %>
                        <button  id="edit_data_paciente" title="Editar" class="btn green">
                            <i class="material-icons">edit</i>
                            <span>Editar paciente</span>
                        </button>
                        <% } %>
                        <div class="collapsible-header active"><i class="material-icons">assignment_ind</i>
                            Datos Personales
                        </div>
                        <div class="collapsible-body">
                            <div class="row">
                                <input disabled id="user_id" type="hidden" value="<%= paciente._id%>" class="validate">

                                <div class="input-field col m6 s12">
                                    <input disabled id="primer_nombre" type="text" class="validate"
                                        value="<%= paciente.primer_nombre%>">
                                    <label for="primer_nombre">Primer Nombre <span style="color:red">*</span></label>
                                </div>
                                <div class="input-field col m6 s12">
                                    <input disabled id="segundo_nombre" type="text" class="validate"
                                        value="<%= paciente.segundo_nombre || " " %>">
                                    <label for="segundo_nombre">Segundo Nombre</label>
                                </div>
                                <div class="input-field col m6 s12">
                                    <input disabled id="primer_apellido" type="text" class="validate"
                                        value="<%= paciente.primer_apellido%>">
                                    <label for="primer_apellido">Primer Apellido <span
                                            style="color:red">*</span></label>
                                </div>
                                <div class="input-field col m6 s12">
                                    <input disabled id="segundo_apellido" type="text" class="validate"
                                        value="<%= paciente.segundo_apellido%>">
                                    <label for="segundo_apellido">Segundo Apellido <span
                                            style="color:red">*</span></label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m5 s12">
                                    <select disabled id="tipo_id" class="validate select browse-select">
                                        <option value="" disabled>Elige una opci√≥n</option>
                                        <option value="CC" <%- paciente.tipo_id == 'CC' ? 'selected' : '' %>>C√©dula De Ciudadan√≠a</option>
                                        <option value="CE" <%- paciente.tipo_id == 'CE' ? 'selected' : '' %>>C√©dula De Extranjer√≠a</option>
                                        <option value="CD" <%- paciente.tipo_id == 'CD' ? 'selected' : '' %>>Carn√© Diplom√°tico</option>
                                        <option value="PA" <%- paciente.tipo_id == 'PA' ? 'selected' : '' %>>Pasaporte</option>
                                        <option value="PE" <%- paciente.tipo_id == 'PE' ? 'selected' : '' %>>Permiso Especial De Permanencia</option>
                                        <option value="RC" <%- paciente.tipo_id == 'RC' ? 'selected' : '' %>>Registro Civil</option>
                                        <option value="TI" <%- paciente.tipo_id == 'TI' ? 'selected' : '' %>>Tarjeta De Identidad</option>
                                        <option value="CN" <%- paciente.tipo_id == 'CN' ? 'selected' : '' %>>Certificado De Nacido Vivo</option>
                                        <option value="AS" <%- paciente.tipo_id == 'AS' ? 'selected' : '' %>>Adulto Sin Identificar</option>
                                        <option value="MS" <%- paciente.tipo_id == 'MS' ? 'selected' : '' %>>Menor Sin Identificar</option>
                                    </select>
                                    <label>Tipo de Identifiaci√≥n: <span style="color:red">*</span></label>
                                </div>
                                <div class="input-field col m4 s12">
                                    <input disabled id="identificacion" type="text" value="<%= paciente.username %>"
                                        class="validate">
                                    <label for="identificacion">N√∫mero de Identifiaci√≥n <span
                                            style="color:red">*</span></label>
                                </div>
                                <div class="input-field col m3 s12">
                                    <select disabled id="estado_civil" class="validate select browse-select">
                                        <option value="" disabled selected>Elige una opci√≥n</option>
                                        <option value="soltero"
                                            <%- paciente.estado_civil == 'soltero' ? 'selected' : '' %>>Soltero(a)
                                        </option>
                                        <option value="casado"
                                            <%- paciente.estado_civil == 'casado' ? 'selected' : '' %>>Casado(a)
                                        </option>
                                        <option value="union_libre"
                                            <%- paciente.estado_civil == 'union_libre' ? 'selected' : '' %>>Uni√≥n libre
                                        </option>
                                        <option value="separado"
                                            <%- paciente.estado_civil == 'separado' ? 'selected' : '' %>>Separado(a)
                                        </option>
                                        <option value="divorciado"
                                            <%- paciente.estado_civil == 'divorciado' ? 'selected' : '' %>>Divorciado(a)
                                        </option>
                                        <option value="viudo" <%- paciente.estado_civil == 'viudo' ? 'selected' : '' %>>
                                            Viudo(a)</option>
                                    </select>
                                    <label>Estado Civil: <span style="color:red">*</span></label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m8 s12">
                                    <input value="<%= paciente.email %>" disabled id="email" type="email"
                                        class="validate">
                                    <label for="email">Email <span style="color:red">*</span></label>
                                </div>
                                <div class="input-field col m4 s12">
                                    <input disabled id="phone" name="phone" type="tel"
                                        value="+<%= paciente.telefono %>">
                                    <!-- <label for="phone">Tel√©fono: </label> -->
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-field col m3 s12">
                                    <input disabled type="text" id="fecha_nacimiento" class="datepicker"
                                        value="<%=paciente.dd_nacimiento%>/<%=paciente.mm_nacimiento%>/<%=paciente.yyyy_nacimiento%>">
                                    <label for="fecha_nacimiento">Fecha de Nacimiento</label>
                                </div>
                                <!-- <div class="input-field col m2 s12">
                                        <input disabled id="edad" type="text" class="validate" value="0 a√±os"
                                            disabled>
                                        <label for="edad">Edad</label>
                                    </div> -->
                                <div class="input-field col m3 s12">
                                    <select disabled id="genero" class="validate select browse-select">
                                        <option value="" disabled>Elige una opci√≥n</option>
                                        <option value="Femenino"
                                            <%- paciente.genero_nacimiento == 'Femenino' ? 'selected' : '' %>>Femenino
                                        </option>
                                        <option value="Masculino"
                                            <%- paciente.genero_nacimiento == 'Masculino' ? 'selected' : '' %>>Masculino
                                        </option>
                                        <option value="Otro"
                                            <%- paciente.genero_nacimiento == 'Otro' ? 'selected' : '' %>>Otro</option>
                                    </select>
                                    <label>G√©nero de Nacimiento</label>
                                </div>
                                <div class="input-field col m6 s12">
                                    <input disabled id="ocupacion" type="text" class="validate"
                                        value="<%= paciente.ocupacion %>">
                                    <label for="ocupacion">Ocupaci√≥n: <span style="color:red">*</span></label>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="collapsible-header active"><i class="material-icons">assignment</i>
                           Firma Consentimiento
                        </div>
                        <!-- <%= Cita %> -->
                        <% let firmaCita = Cita.firma
                        if(firmaCita == '') { %>
                            <div class="collapsible-body">
                                <table>
                                    <tr>
                                        <td>                                        
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="Firma_consInformado_children">
                                                <label class="form-check-label" for="Firma_consInformado_children">firma consentimiento Children</label>
                                            </div>
                                        </td>
                                        <td>
                                            <div class="form-check">
                                                <input type="checkbox" class="form-check-input" id="Firma_consInformado_adulto">
                                                <label class="form-check-label" for="Firma_consInformado_adulto">firma consentimiento Adulto</label>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        <% } else { %>
                            <div class="collapsible-body">
                                <table>
                                    <tr>
                                        <td>
                                            <div class="row">
                                                <div class="input-field col m6 s12">
                                                    <input id="nombre_paciente_user" type="text" class="validate" disabled
                                                        value="<%= Cita.nombrePacienteFirma %>">
                                                    <label for="nombre_paciente_user">Nombre </label>
                                                </div>
                                                <div class="input-field col m6 s12">
                                                    <input id="cedula_paciente_user" type="text" class="validate" disabled
                                                        value="<%= Cita.cedulaPacienteFirma %>">
                                                    <label for="cedula_paciente_user">Cedula</label>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <textarea id="consentimiento_children" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50" style="height: 440px;"
                                                    data-tooltip="Consentimiento para nino." ><%= Cita.consentimientoFirmado %>"</textarea>
                                            </div>
                                            <!-- <% firmaCita %> -->
                                            <div class="" class="pagebreak"
                                              style="width:34%; display: inline-block;">
                                              <div class="signature-pad--body">                                                
                                                <img src="<%= Cita.firma %>">
                                              </div>
                                              <p><%= Cita.nombrePacienteFirma %> <br> <%= Cita.cedulaPacienteFirma %></p>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        <% } %>
                    </li>
                    <% if(sede_id == '60049afed00d9b43a49e4da7') { %>
                    <% if( datos_sesion) { %>
                        <style type="text/css">
                            html { font-family:Calibri, Arial, Helvetica, sans-serif; font-size:11pt; background-color:white }
                            a.comment-indicator:hover + div.comment { background:#ffd; position:absolute; display:block; border:1px solid black; padding:0.5em }
                            a.comment-indicator { background:red; display:inline-block; border:1px solid black; width:0.5em; height:0.5em }
                            div.comment { display:none }
                            table { border-collapse:collapse; page-break-after:always }
                            .gridlines td { border:1px dotted black }
                            .gridlines th { border:1px dotted black }
                            .b { text-align:center }
                            .e { text-align:center }
                            .f { text-align:right }
                            .inlineStr { text-align:left }
                            .n { text-align:right }
                            .s { text-align:left }
                            td.style0 { vertical-align:bottom; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
                            th.style0 { vertical-align:bottom; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Calibri'; font-size:11pt; background-color:white }
                            td.style1 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style1 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style2 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style2 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style3 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style3 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style4 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style4 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style5 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style5 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style6 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style6 { vertical-align:middle; border-bottom:2px solid #CCCCCC !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style7 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style7 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style8 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style8 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style9 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style9 { vertical-align:middle; border-bottom:2px solid #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style10 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style10 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style11 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style11 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style12 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style12 { vertical-align:middle; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style13 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style13 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style14 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style14 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style15 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style15 { vertical-align:middle; border-bottom:none #000000; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style16 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style16 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style17 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style17 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style18 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style18 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style19 { vertical-align:top; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #000000 !important; border-left:2px solid #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style19 { vertical-align:top; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #000000 !important; border-left:2px solid #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style20 { vertical-align:top; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:2px solid #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style20 { vertical-align:top; text-align:center; border-bottom:2px solid #000000 !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:2px solid #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style21 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style21 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style22 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style22 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style23 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style23 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style24 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style24 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style25 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style25 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style26 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style26 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style27 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style27 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:2px solid #CCCCCC !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style28 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style28 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style29 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style29 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style30 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style30 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style31 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style31 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style32 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style32 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style33 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style33 { vertical-align:middle; text-align:center; border-bottom:none #000000; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style34 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style34 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style35 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style35 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style36 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style36 { vertical-align:middle; text-align:center; border-bottom:3px double #000000 !important; border-top:none #000000; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style37 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style37 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style38 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style38 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style39 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            th.style39 { vertical-align:middle; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:#FFFF00 }
                            td.style40 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style40 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:3px double #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style41 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style41 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style42 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style42 { vertical-align:top; border-bottom:3px double #000000 !important; border-top:3px double #000000 !important; border-left:none #000000; border-right:3px double #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style43 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:2px solid #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style43 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:2px solid #000000 !important; border-right:none #000000; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            td.style44 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:2px solid #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            th.style44 { vertical-align:top; text-align:center; border-bottom:2px solid #CCCCCC !important; border-top:2px solid #000000 !important; border-left:none #000000; border-right:2px solid #000000 !important; color:#000000; font-family:'Arial'; font-size:10pt; background-color:white }
                            table.sheet0 col.col0 { width:42pt }
                            table.sheet0 col.col1 { width:42pt }
                            table.sheet0 col.col2 { width:42pt }
                            table.sheet0 col.col3 { width:42pt }
                            table.sheet0 col.col4 { width:42pt }
                            table.sheet0 col.col5 { width:42pt }
                            table.sheet0 col.col6 { width:42pt }
                            table.sheet0 col.col7 { width:42pt }
                            table.sheet0 col.col8 { width:42pt }
                            table.sheet0 col.col9 { width:42pt }
                            table.sheet0 col.col10 { width:42pt }
                            table.sheet0 col.col11 { width:42pt }
                            table.sheet0 tr { height:15pt }
                            table.sheet0 tr.row0 { height:16.5pt }
                            table.sheet0 tr.row1 { height:25.5pt }
                            table.sheet0 tr.row2 { height:25.5pt }
                            table.sheet0 tr.row3 { height:38.25pt }
                            table.sheet0 tr.row4 { height:16.5pt }
                            table.sheet0 tr.row5 { height:15.75pt }
                            table.sheet0 tr.row6 { height:16.5pt }
                            table.sheet0 tr.row7 { height:25.5pt }
                            table.sheet0 tr.row8 { height:16.5pt }
                            table.sheet0 tr.row9 { height:16.5pt }
                            table.sheet0 tr.row10 { height:16.5pt }
                            table.sheet0 tr.row11 { height:16.5pt }
                            table.sheet0 tr.row12 { height:16.5pt }
                            table.sheet0 tr.row13 { height:16.5pt }
                            table.sheet0 tr.row14 { height:51pt }
                         
                          
                      </style>
                    <li>
                        <div class="collapsible-header active"><i class="material-icons">assignment</i>
                            REGISTRO DE SESI√ìN 
                        </div>
                        
                        <div class="collapsible-body">
                            <table border="0" cellpadding="0" cellspacing="0" id="sheet0" class="sheet0 gridlines">
                                <col class="col0">
                                <col class="col1">
                                <col class="col2">
                                <col class="col3">
                                <col class="col4">
                                <col class="col5">
                                <col class="col6">
                                <col class="col7">
                                <col class="col8">
                                <col class="col9">
                                <col class="col10">
                                <col class="col11">
                                <tbody> 
                                    <% if(Cita.aprobadoSesiones){ %>
                                    <button  class="btn green" id="" title="Aprobado">
                                        <i class="material-icons">check_circle</i>
                                        <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                    </button>  
                                    <% }else{ %>            
                                     <button  data-target="modal_sesion" class="btn modal-trigger" id="comentSesion" title="Comentarios">
                                    <i class="material-icons">question_answer</i>
                                    <span>Observaciones</span>
                                     </button>
                                     <% } %>
                                  <tr class="row0">
                                    <td class="column0 style4 s style6" colspan="3" rowspan="2">Sesi√≥n con Coterap√©uta: 
                                        
                                        <select id="sessionCoterapeuta" class="validate select browse-select">
                                            <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="No" <%- datos_sesion.sessionCoterapeuta == 'No' ? 'selected' : '' %>>No</option>
                                            <option value="Si" <%- datos_sesion.sessionCoterapeuta == 'Si' ? 'selected' : '' %>>Si</option>
                                        </select>
                                        <label for="causaExterma" class="">Causa</label>
                                    </td>
                                    <td class="column3 style10 s style24" colspan="9" rowspan="2"> Nombre del Coterapeuta:                 
                                      
                                      <div id="divCoterapeutas" class="row">
                                        <div class="col s12">
                                           <input type="text" value="<%= datos_sesion.dataCoterapeuta %>" id="dataCoterapeuta">
                                        </div>
                                      </div>
                    
                                    </td>
                                  </tr>
                                  <tr class="row1">
                                  </tr>
                                  <tr class="row2">
                                    <td class="column0 style28 s style30" colspan="3" rowspan="2">Sesi√≥n llevada a supervisi√≥n directa
                                        
                                        <select id="sessionSupervisor" class="validate select browse-select">
                                            <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="No" <%- datos_sesion.sessionSupervisor == 'No' ? 'selected' : '' %>>No</option>
                                            <option value="Si" <%- datos_sesion.sessionSupervisor == 'Si' ? 'selected' : '' %>>Si</option>
                                        </select>
                                        <label for="causaExterma" class="">Causa</label>
                                    </td>
                                    <td class="column3 style10 s style24" colspan="9" rowspan="2">  Nombre del Docentes Del Supervisor 
                                      <div id="divSupervisor" class="row">
                                        <div class="col s12">
                                            <input type="text" value="<%= datos_sesion.dataSupervisor %>" id="dataSupervisor">
                                        </div>
                       
                                  </tr>
                                  <tr class="row3">
                                  </tr>
                                  <tr class="row4">
                                    <td class="column0 style10 s style24" colspan="3" rowspan="3">Fecha Sesi√≥n: <%-
                                      new Date()
                                    %></td>
                                    <td class="column3 style4 s style6" colspan="9">Asisti√≥:
                                        
                                        <select id="asistio" class="validate select browse-select">
                                            <option value="" disabled>Elige una opci√≥n</option>
                                            <option value="No" <%- datos_sesion.asistio == 'No' ? 'selected' : '' %>>No</option>
                                            <option value="Si" <%- datos_sesion.asistio == 'Si' ? 'selected' : '' %>>Si</option>
                                        </select>
                                        <label for="causaExterma" class="">Causa</label>
                                    </td>
                                  </tr>
                                  <tr class="row6">
                                    <td class="column3 style16 s style18" colspan="9">El consultante justific√≥ oportunamente su inasistencia?
                                        
                                        <select id="justificacion" class="validate select browse-select">
                                            <option value="" disabled>Elige una opci√≥n</option>
                                            <option value="No" <%- datos_sesion.justificacion == 'No' ? 'selected' : '' %> >No</option>
                                            <option value="Si" <%- datos_sesion.justificacion == 'Si' ? 'selected' : '' %>>Si</option>
                                        </select>
                                        <label for="causaExterma" class="">Causa</label>
                                    </td>
                                  </tr>
                                  <tr class="row7">
                                    <td class="column0 style40 s style42" colspan="12">Valoraci√≥n de efectos y de curso del cambio (prescripciones, sugerencias, acontecimientos y acuerdos hechos en la sesi√≥n anterior)
                                        
                                        <textarea id="valoracion" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.valoracion %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row8">
                                    <td class="column0 style40 s style42" colspan="12">Din√°mica de la sesi√≥n (proceso conversacional, posici√≥n de los participantes, relatos emergentes)
                                        
                                        <textarea id="dinamica" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.dinamica %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row9">
                                    <td class="column0 style40 s style42" colspan="12">Objetivo
                                        <textarea id="objetivo" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.objetivo %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row10">
                                    <td class="column0 style40 s style42" colspan="12">Hip√≥tesis
                                        <textarea id="hipotesis" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.hipotesis %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row11">
                                    <td class="column0 style40 s style42" colspan="12">Estrategia
                                        <textarea id="estrategia" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.estrategia %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row12">
                                    <td class="column0 style40 s style42" colspan="12">Cierre de la sesi√≥n (prescripciones, mensaje, sugerencia, acuerdos y cambios emergentes)
                                        <textarea id="cierreSesion" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.cierreSesion %></textarea>
                                    </td>
                                  </tr>
                                  <tr class="row13">
                                    <td class="column0 style7 s style9" colspan="12">Personas convocadas a la siguiente sesi√≥n
                                        <textarea id="personaConvocadas" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                    data-length="5000" data-position="top" data-delay="50"
                                                    data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                    style="width: 100%;"><%= datos_sesion.personaConvocadas %></textarea>
                                    </td>
                                  </tr>
                                 
                                </tbody>
                            </table>   
                            <div class="row">
                                <div class="col s4">
                                    <p>diagnostico principal </p>
                                </div>
                                <div class="col s6">
                                    <input type="text" name="" id="diagnosticoPrincipalSession" class="autocomplete-cie10" value="<%=datos_sesion.diagnosticoPrincipalSession %>">
                                </div>
                            </div>
                          
                            <div class="row">
                                <div class="col m4">
                                    <p>Tipo diagnostico</p>
                                </div>
                                <div class="col s6">                
                                    <select id="tipoDiagnostico" class="validate select browse-select">
                                        <option value="" disabled>Elige una opci√≥n</option>
                                        <option value="01 Impresion diagnostica" <%- datos_sesion.tipoDiagnostico == '01 Impresion diagnostica' ? 'selected' : '' %>>Impresi√≥n diagn√≥stica </option>
                                        <option value="02 Confirmado nuevo" <%- datos_sesion.tipoDiagnostico == '02 Confirmado nuevo' ? 'selected' : '' %>>Confirmado nuevo </option>
                                        <option value="03 Confirmado repetido" <%- datos_sesion.tipoDiagnostico == '03 Confirmado repetido' ? 'selected' : '' %>>Confirmado repetido</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s4">
                                    <p>diagnostico principal </p>
                                </div>
                                <div class="col s6">
                                   <input type="text" name="" id="diagnosticoSecundarioSession" class="autocomplete-cie10" value="<%=datos_sesion.diagnosticoSecundarioSession %>">
                                </div>
                            </div>
                            <% if (!HistoriaClinica.cerrado) { %>
                                <% if (user.tipo_profesional == 'colegiado' || user.roles == 'SP') { %>                              
                                    <div class="col s6">
                                        <button class="col m12 m12 s12 btn waves-effect green waves-light" id="">
                                        <i class="material-icons">keyboard_return</i>
                                        <span style="position: relative; bottom: 4px;"> Regresa</span>
                                        </button>
                                    </div>
                                    <% if(Cita.aprobadoSesiones){ %>
                                        <div class="col s6">
                                            <button class="col m12 m12 s12 btn waves-effect red waves-light" id="close_data_sesion">
                                                <i class="material-icons">close</i>
                                                <span style="position: relative; bottom: 4px;">Cerrar y aprobada esta sesi√≥n</span>
                                            </button>
                                        </div><br><br>
                                   <% } else{%>
                                    <div class="col s6">
                                        <button class="col m12 m12 s12 btn waves-effect red waves-light" id="" style=" cursor: not-allowed;" readonly>
                                            <i class="material-icons">close</i>
                                            <span style="position: relative; bottom: 4px;">Cerrar y aprobada esta sesi√≥n</span>
                                        </button>
                                    </div><br><br>
                                    <% } %>
                                <% } else { %>     
                                    <div class="row">
                                        <div class="col s6">
                                            <button class="col m12 m12 s12 btn waves-effect green waves-light" id="enviar_data_sesion">
                                            <i class="material-icons">save</i>
                                            <span style="position: relative; bottom: 4px;"> Guardar</span>
                                            </button>
                                        </div>
                                    </div>   
                            <% } %>
                            <% } %>
                        </div>
                    </li>
                    <%if(HistoriaClinica.cerrado){ %>
                        <li>
                            <div class="collapsible-header"><i
                                    class="material-icons">edit</i> Firma
                            </div>
                            <div class="collapsible-body">
                                <div class="row">
                                    <div class="file-field input-field  col l6 s12">
                                        <div class="btn blue">
                                            <span>Firma Practicante</span> 
                                        </div>
                                        <div class="file-path-wrapper">
                                        </div>
                                    </div>
                                    <div class="file-field input-field  col l6 s12">
                                        <div class="btn red">
                                            <span>Firma Supervisor</span>
                                        </div>
                                        <div class="file-path-wrapper">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col l6 s6">
                                        <img src="<%= profesional.foto_firma != null ? profesional.foto_firma.location : 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Imagen_no_disponible.svg/600px-Imagen_no_disponible.svg.png' %>"
                                            alt="" class="materialboxed"
                                            style="width:50%" >
                                    </div>
                                    <div class="col l6 s6" id="superFirma">

                                    </div>
                                </div>   
                            </div>
                            
                        </li><br>

                    <% } %>
                    <% }  else if (HC_datos){ %>
                        <ul class="collapsible">
                            <li class="active">
                                <div class="collapsible-header active"><i class="material-icons">insert_comment</i>Motivo de consulta</div>
                                <div class="collapsible-body"><span>
                                <div class="row">
                                        <% if(Cita.aprobadoMotivoConsul){ %>
                                            <button  class="btn green" id="" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoMotivoConsul')">
                                                <i class="material-icons">check_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                            </button>  
                                       <% }else{ %>
                                        <button  data-target="modal_consulta" class="btn modal-trigger" id="comentMotConsulta" title="Comentarios">                         
                                            <i class="material-icons">question_answer</i> 
                                            <span>Observaciones</span>           
                                        </button>
                                        <% } %>                                            
                                        <textarea id="value_motivoConsulta"  class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                        data-length="5000" data-position="top" data-delay="50"
                                        data-tooltip="Motivo de Consulta."
                                        style="width: 100%;" required  ><%= HC_datos.motivoConsulta %></textarea>                             
                                </div>
                                </span></div>
                            </li>
                            <li>
                                <div class="collapsible-header"><i class="material-icons">view_headline</i>Caracter√≠sticas</div>
                                <div class="collapsible-body"><span>
                                <div class="row">
                                        <% if(Cita.aprobadoCaracteristica){ %>
                                            <button  class="btn green" id="" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoCaracteristica')">
                                                <i class="material-icons">check_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                            </button>  

                                        <% }else{ %>
                                        <button  data-target="modal_caracteristica" class="btn modal-trigger" id="comentCaracteristicas" title="Comentarios">
                                            <i class="material-icons">question_answer</i>
                                            <span>Observaciones</span> 
                                        </button>
                                        <% } %>
                                    <p> Mapa de relaciones ecol√≥gico: (Familiograma o Ecomapa o Mapa de Red, entre otros, relacionado a la historia familiar y al contexto relacional). </p>
                                </div>
                                    <div class="row">
                                        <div class="col s12 m4 l2"></div>
                                        <div class="col s12 m4 l8"></div>
                                        <div class="input-field col s12 m4 l2">
                                          <a id="addTableGeo" class="waves-effect btn-flat col m12 s12 btn waves-effect primary waves-light">
                                            <i class="material-icons">add_circle</i>
                                            <span style="position: relative; bottom: 4px;"> Agregar Documento</span>
                                          </a>
                                        </div>
                                        <table class="bordered highlight responsive-table centered">
                                          <thead class="">
                                            <tr>
                                              <th>Seleccionar Archivo</th>
                                              <th>Cargar/ver</th>
                                            </tr>
                                          </thead>
                                          <tbody id="table_documentPacientGeo">
                                          </tbody>
                                        </table>
                                      </div>
                                    </span></div>
                            </li>
                            <li>
                                <div class="collapsible-header"><i class="material-icons">groups</i>Caracter√≠sticas sociodemogr√°ficas significativas de los miembros de la familia</div>
                                <div class="collapsible-body"><span>    
                                <div class="row">
                                        <% if(Cita.aprobadoCaracteristicaSocio){ %>
                                            <button  class="btn green" id="desaprobar" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoCaracteristicaSocio')">
                                                <i class="material-icons">check_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                            </button>  

                                        <% }else{ %>
                                        <button  data-target="modal_caracteristicaSocio" class="btn modal-trigger" id="comentCaracteristicasSocio" title="Comentarios">
                                            <i class="material-icons">question_answer</i>
                                            <span>Observaciones</span> 
                                        </button>
                                        <% } %> 
                                    <div class="col s6 offset-s6">
                                        <a id="addTableFamilia" class="waves-effect btn-flat col m12 s12 btn waves-effect primary waves-light">
                                            <i class="material-icons">add_circle</i>
                                            <span style="position: relative; bottom: 4px;"> Agregar informaci√≥n familiar</span>
                                        </a>
                                    </div>
                                     <div class="col s12">
                                        <table id="exampleFamily" class="bordered highlight responsive-table centered">
                                            <thead class="">
                                              <tr>
                                                <th>Nombre y apellido</th>
                                                <th>Rol en la familia</th>
                                                <th>Edad</th>
                                                <th>Nivel de Escolaridad</th>
                                                <th>Ocupaci√≥n</th>
                                                <th>Estado civil</th>
                                                <th>Lugar de Nacimiento</th>
                                              </tr>
                                            </thead>
                                            <% for(j=0; j< HC_datos.addfamily.length; j++){ %>
                                            <tr>
                                                <td>
                                                    <input type="text" id="name"  class="validate" value="<%= HC_datos.addfamily[j].name %>" > 
                                                </td> 
                                                <td>
                                                    <select id="rol" >
                                                        <option value="" disabled    >Elige una opci√≥n</option>
                                                        <option value="Madre" <%- HC_datos.addfamily[j].rol == 'Madre' ? 'selected' : '' %>>Madre</option>
                                                        <option value="Padre" <%- HC_datos.addfamily[j].rol == 'Padre' ? 'selected' : '' %>>Padre</option>
                                                        <option value="tio" <%- HC_datos.addfamily[j].rol == 'tio' ? 'selected' : '' %>>tio</option>
                                                        <option value="tia" <%- HC_datos.addfamily[j].rol == 'tia' ? 'selected' : '' %>>tia</option>
                                                        <option value="abuelo" <%- HC_datos.addfamily[j].rol == 'abuelo' ? 'selected' : '' %>>abuelo</option>
                                                        <option value="abuela" <%- HC_datos.addfamily[j].rol == 'abuela' ? 'selected' : '' %>>abuela</option>
                                                        <option value="primo" <%- HC_datos.addfamily[j].rol == 'primo' ? 'selected' : '' %>>primo</option>
                                                        <option value="prima" <%- HC_datos.addfamily[j].rol == 'prima' ? 'selected' : '' %>>prima</option>
                                                    </select>
                                                    <label for="rol" class="">Rol Familiar</label>
                                                </td>
                                                <td>
                                                    <input type="number" id="edad" value="<%= HC_datos.addfamily[j].edad %>">
                                                </td>
                                                <td>
                                                    <select id="nivelEscolaridad" >
                                                        <option value="" disabled >Elige una opci√≥n</option>
                                                        <option value="MNE.: menor no escolar." <%- HC_datos.addfamily[j].nivelEscolaridad == 'MNE.: menor no escolar.' ? 'selected' : '' %>>MNE.: menor no escolar.</option>
                                                        <option value="AN.: analfabeta." <%- HC_datos.addfamily[j].nivelEscolaridad == 'AN.: analfabeta.' ? 'selected' : '' %>>AN.: analfabeta.</option>
                                                        <option value="PREESC: pr√©-escolar" <%- HC_datos.addfamily[j].nivelEscolaridad == 'PREESC: pr√©-escolar.' ? 'selected' : '' %>>PREESC: pr√©-escolar. </option>
                                                        <option value="PR.: prim√°rios." <%- HC_datos.addfamily[j].nivelEscolaridad == 'PR.: prim√°rios.' ? 'selected' : '' %>>PR.: prim√°rios. </option>
                                                        <option value="SEC IN.: secundaria incompleta." <%- HC_datos.addfamily[j].nivelEscolaridad == 'SEC IN.: secundaria incompleta.' ? 'selected' : '' %>>SEC IN.: secundaria incompleta. </option>
                                                        <option value="SEC COM.: secundaria completa." <%- HC_datos.addfamily[j].nivelEscolaridad == 'SEC COM.: secundaria completa.' ? 'selected' : '' %>>SEC COM.: secundaria completa. </option>
                                                        <option value="UNI. IN.: universit√°rios interm√©dios o incompletos." <%- HC_datos.addfamily[j].nivelEscolaridad == 'UNI. IN.: universit√°rios interm√©dios o incompletos.' ? 'selected' : '' %>>UNI. IN.: universit√°rios interm√©dios o incompletos.</option>
                                                        <option value="UNI COM.: universitarios completos." <%- HC_datos.addfamily[j].nivelEscolaridad == 'UNI COM.: universitarios completos.' ? 'selected' : '' %>> UNI COM.: universitarios completos.</option>
                                                    </select>
                                                    <label for="nivelEscolaridad" class="">Nivel Escolaridad</label>
                                                </td>
                                                <td>
                                                    <select id="ocupacion" >
                                                        <option value="" disabled >Elige una opci√≥n</option>
                                                        <option value="Hogar." <%- HC_datos.addfamily[j].ocupacion == 'Hogar.' ? 'selected' : '' %>>HOGAR.</option>
                                                        <option value="empleado estable." <%- HC_datos.addfamily[j].ocupacion == 'empleado estable.' ? 'selected' : '' %>>EMP.EST.: empleado estable. </option>
                                                        <option value="EMP.INES.: empleado inestable" <%- HC_datos.addfamily[j].ocupacion == 'EMP.INES.: empleado inestable' ? 'selected' : '' %>>EMP.INES.: empleado inestable (sin contrato).</option>
                                                        <option value="TRA. IND.: trabajador independiente" <%- HC_datos.addfamily[j].ocupacion == 'TRA. IND.: trabajador independiente' ? 'selected' : '' %>> TRA. IND.: trabajador independiente. </option>
                                                        <option value="ESTUD.: estudiante." <%- HC_datos.addfamily[j].ocupacion == 'ESTUD.: estudiante.' ? 'selected' : '' %>>ESTUD.: estudiante.</option>
                                                        <option value="JUB.: jubilado o retirado." <%- HC_datos.addfamily[j].ocupacion == 'JUB.: jubilado o retirado.' ? 'selected' : '' %>> JUB.: jubilado o retirado.</option>
                                                    </select>
                                                    <label for="ocupacion">Periodo</label>
                                                </td>
                                                <td>
                                                    <select id="estadoCivil" >
                                                        <option value="" disabled >Elige una opci√≥n</option>
                                                        <option value="Soltero" <%- HC_datos.addfamily[j].estadoCivil == 'Soltero' ? 'selected' : '' %>>Soltero</option>
                                                        <option value="Casado" <%- HC_datos.addfamily[j].estadoCivil == 'Casado' ? 'selected' : '' %>> Casado</option>
                                                        <option value="Viudo" <%- HC_datos.addfamily[j].estadoCivil == 'Viudo' ? 'selected' : '' %>> Viudo</option>
                                                        <option value="Separado" <%- HC_datos.addfamily[j].estadoCivil == 'Separado' ? 'selected' : '' %>> SEP.: Separado. </option>
                                                        <option value="Union Libre" <%- HC_datos.addfamily[j].estadoCivil == 'Union Libre' ? 'selected' : '' %>> UL.: Uni√≥n libre. </option>
                                                        <option value="Madre Soltera" <%- HC_datos.addfamily[j].estadoCivil == 'Madre Soltera' ? 'selected' : '' %>> MS.: Madre soltera. </option>
                                                    </select>
                                                    <label for="estadoCivil">Frecuencia</label>
                                                </td>
                                                <td>
                                                    <input type="text" id="lugarNacimiento" value="<%- HC_datos.addfamily[j].lugarNacimiento %>">
                                                </td>
                                                <td>
                                                    <a id="addProfesional" class="DeleteButtonFammily waves-effectwaves-effect primary waves-light">
                                                        <i class="material-icons">delete</i>
                                                        <span style="position: relative; bottom: 4px;">Delete</span>
                                                    </a>
                                                </td>
                                              </tr>
                                              <% } %> 
                                            <tbody id="table_documentFamily">
                                            </tbody>
                                        </table> <br><br>
                                    </div>
                                    <div class="row">
                                        <div class="col s6 offset-s6">
                                            <a id="addTableOtherRedes" class="waves-effect btn-flat col m12 s12 btn waves-effect primary waves-light">
                                                <i class="material-icons">add_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Agregar registros</span>
                                            </a>
                                        </div>
                                        <div class="col s12">
                                            <table id="exampleInstitucion"  class="bordered highlight responsive-table centered">
                                                <thead class="">
                                                  <tr>
                                                    <th>Tipo de Instituci√≥n/Organizaci√≥n</th>
                                                    <th>Nombre de la Instituci√≥n/organizaci√≥n</th>
                                                    <th>Tiempo de vinculaci√≥n con la Instituci√≥n/organizaci√≥n</th>
                                                    <th>Otros datos relevantes</th>
                                                  </tr>
                                                </thead>
                                                <% for(let a = 0; a< HC_datos.addregistro.length; a++ ){ %>
                                                    <tr>
                                                        <td>  <input type="text" id="tipoInstitucion" value="<%= HC_datos.addregistro[a].tipoInstitucion %>"  >  </td>
                                                        <td>  <input type="text" id="nombreInstitucion" value="<%= HC_datos.addregistro[a].nombreInstitucion %>" >   </td>
                                                        <td>  <input type="text" id="tiempoVinculacion" value="<%= HC_datos.addregistro[a].tiempoVinculacion %>" >   </td>
                                                        <td>  <input type="text" id="otrosDatos"  value="<%= HC_datos.addregistro[a].otrosDatos %>" >  </td>
                                                    </tr>
                                                  <% } %>
                                                <tbody id="table_documentPacient2">
                                                </tbody>
                                              </table>
                                        </div>
                                    </div>
                                </div><br><br>
                                <div class="row">
                                    <div class="col s3">
                                        <p>Composici√≥n familiar</p>
                                    </div>
                                    <div class="col s4">               
                                     <select name="" id="composicion_Familiar_Select">
                                     <option value="Familia nuclear simple" <%- HC_datos.composicion_Familiar_Select == 'Familia nuclear simple' ? 'selected' : '' %>>Familia nuclear simple</option>
                                     <option value="Familia nuclear biparental" <%- HC_datos.composicion_Familiar_Select == 'Familia nuclear biparental' ? 'selected' : '' %>>Familia nuclear biparental</option>
                                     <option value="Familia nuclear monoparental" <%- HC_datos.composicion_Familiar_Select == 'Familia nuclear monoparental' ? 'selected' : '' %>>Familia nuclear monoparental</option>
                                     <option value="Familia extensa biparental" <%- HC_datos.composicion_Familiar_Select == 'Familia extensa biparental' ? 'selected' : '' %>>Familia extensa biparental</option>
                                     <option value="Familia extensa monoparental" <%- HC_datos.composicion_Familiar_Select == 'Familia extensa monoparental' ? 'selected' : '' %>>Familia extensa monoparental</option>
                                     <option value="Familia reconstituida" <%- HC_datos.composicion_Familiar_Select == 'Familia reconstituida' ? 'selected' : '' %>>Familia reconstituida</option>
                                     <option value="Familia adoptiva" <%- HC_datos.composicion_Familiar_Select == 'Familia adoptiva' ? 'selected' : '' %>>Familia adoptiva</option>
                                     <option value="Familia en proteccion" <%- HC_datos.composicion_Familiar_Select == 'Familia en protecci√≥n' ? 'selected' : '' %>>Familia en protecci√≥n</option>
                                     <option value="Sin familia" <%- HC_datos.composicion_Familiar_Select == 'Sin familia' ? 'selected' : '' %>>Sin familia</option>
                                     <option value="Otra" <%- HC_datos.composicion_Familiar_Select == 'Otra' ? 'selected' : '' %>>Otra</option>
                                    </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12">
                                        <p for="composicion_Familiar">Composici√≥n familiar</p>
                                            <textarea id="composicion_Familiar" type="text"  class="materialize-textarea clean_on_create tooltipped" data-position="top"
                                                    data-delay="50"
                                                    data-tooltip="Composici√≥n Familiar."><%- HC_datos.comoposicionFamiliar %></textarea>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s3">
                                        <p>Paciente identificado o subsistema</p>
                                    </div>
                                    <div class="col s4">               
                                     <select name="" id="paciente_subsistema_Select">
                                     <option value="Pareja" <%- HC_datos.paciente_subsistema_Select == 'Pareja' ? 'selected' : '' %>>Pareja</option>
                                     <option value="Ni√±o/a" <%- HC_datos.paciente_subsistema_Select == 'Ni√±o/a' ? 'selected' : '' %>>Ni√±o/a</option>
                                     <option value="Joven" <%- HC_datos.paciente_subsistema_Select == 'Joven' ? 'selected' : '' %>>Joven</option>
                                     <option value="Adulto" <%- HC_datos.paciente_subsistema_Select == 'Adulto' ? 'selected' : '' %>>Adulto</option>
                                     <option value="Persona mayor" <%- HC_datos.paciente_subsistema_Select == 'Persona mayor' ? 'selected' : '' %>>Persona mayor</option>
                                    </select>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12">
                                        <p for="paciente_subsistema">Paciente identificado o subsistema</p>
                                            <textarea id="paciente_subsistema" type="text"  class="materialize-textarea clean_on_create tooltipped" data-position="top"
                                                        data-delay="50"
                                                        data-tooltip="Paciente identificado o subsistema."><%- HC_datos.paciente_subsistema %></textarea>
                                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12">
                                        <p for="paciente_subsistema">Comprensi√≥n de las Caracter√≠sticas Familiares: Aspectos significativos para comprender el caso.</p>
                                            <textarea id="PacienteIdentificado" type="text"  class="materialize-textarea clean_on_create tooltipped" data-position="top"
                                                        data-delay="50"
                                                        data-tooltip="Paciente identificado o subsistema."><%- HC_datos.PacienteIdentificado %></textarea>
                                            
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12">
                                        <p for="comprension_Familiar">Comprensi√≥n de las Caracter√≠sticas Familiares</p>
                                            <textarea id="comprension_Familiar" type="text"  class="materialize-textarea clean_on_create tooltipped" data-position="top"
                                                data-delay="50"
                                                data-tooltip="Comprensi√≥n de las Caracter√≠sticas Familiares."><%- HC_datos.comprensionCaracteristicas %></textarea>
                                    </div>
                                </div>
                            </span></div>
                        </li>
                        <li>
                            <div class="collapsible-header"><i class="material-icons">person</i>CICLO VITAL Transiciones del ciclo evolutivo </div>
                            <div class="collapsible-body"><span>  
                                <div class="row">
                                        <% if(Cita.aprobadoCiclo){ %>
                                            <button  class="btn green" id="" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoCiclo')">
                                                <i class="material-icons">check_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                            </button>  

                                        <% }else{ %>
                                        <button  data-target="modal_ciclo" class="btn modal-trigger" id="comentCiclo" title="Comentarios">
                                            <i class="material-icons">question_answer</i>
                                            <span>Observaciones</span> 
                                        </button>
                                        <%} %>
                                    <div class="col s4">
                                        <select  id="cicloVital">
                                        <option value="" disabled selected>Tipo de campo <span style="color:red">*</span></option>
                                        <option value="Entre familias: Joven adulto no emancipado" <%- HC_datos.cicoVital == 'Entre familias: Joven adulto no emancipado' ? 'selected' : '' %>>Entre familias: Joven adulto no emancipado</option>
                                        <option value="Parejas sin hijos" <%- HC_datos.cicoVital == 'Parejas sin hijos' ? 'selected' : '' %>>Parejas sin hijos</option>
                                        <option value="Familia con hijos peque√±os (Hijo mayor de 0 a 5 a√±os)" <%- HC_datos.cicoVital == 'Familia con hijos peque√±os (Hijo mayor de 0 a 5 a√±os)' ? 'selected' : '' %>>Familia con hijos peque√±os (Hijo mayor de 0 a 5 a√±os)</option>
                                        <option value="Familia con hijos escolares (Hijo mayor de 6 a 12 a√±os)" <%- HC_datos.cicoVital == 'Familia con hijos escolares (Hijo mayor de 6 a 12 a√±os)' ? 'selected' : '' %>>Familia con hijos escolares (Hijo mayor de 6 a 12 a√±os)</option>
                                        <option value="Familia con hijos j√≥venes (Hijo mayor de 13 a 18 a√±os)" <%- HC_datos.cicoVital == 'Familia con hijos j√≥venes (Hijo mayor de 13 a 18 a√±os)' ? 'selected' : '' %>>Familia con hijos j√≥venes (Hijo mayor de 13 a 18 a√±os)</option>
                                        <option value="Salida de los hijos del hogar (Hijo mayor de 19 a 30 a√±os)" <%- HC_datos.cicoVital == 'Salida de los hijos del hogar (Hijo mayor de 19 a 30 a√±os)' ? 'selected' : '' %>">Salida de los hijos del hogar (Hijo mayor de 19 a 30 a√±os)</option>
                                        <option value="Parejas en jubilaci√≥n" <%- HC_datos.cicoVital == 'Parejas en jubilaci√≥n' ? 'selected' : '' %>>Parejas en jubilaci√≥n</option>
                                        <option value="otras" <%- HC_datos.cicoVital == 'otras' ? 'selected' : '' %>>Otras</option>
                                        </select>
                                    </div>
                                </div>
                                <% if(HC_datos.cicoVital === 'otras'){ %>
                                <div class="row" id="hideOtras">
    
                                    <div class="col s12">
                                        <textarea id="otras" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                        data-length="5000" data-position="top" data-delay="50"
                                        data-tooltip="Ciclo Vital"
                                        style="width: 100%;"> <%- HC_datos.otasCategorias %> </textarea>
                                    </div>
                                </div>
                                <% } else{ %>
                                    <div class="row" id="showOtras">

                                    </div>
                                    
                                 <% }  %>
                                <div class="row">
                                    <p> <strong>Comprensi√≥n del Ciclo Vital: Aspectos significativos para comprender el caso.</strong>  </p>
                                    <div class="col s12">
                                        <textarea id="comprension_cicloVital" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Comprensi√≥n del Ciclo Vital."
                                            style="width: 100%;"><%- HC_datos.comprensionCicloVital %></textarea>
                                    </div>
                                </div>
                            </span></div>
                        </li>
                        <li>
                            <div class="collapsible-header"><i class="material-icons">accessibility</i>Perfil de generatividad / vulnerabilidad</div>
                            <div class="collapsible-body"><span>
                                <div class="row">
                                    <div>
                                        <table border="0" cellpadding="0" cellspacing="0" id="sheet0" class="sheet0 gridlines">
                                            <col class="col0">
                                            <col class="col1">
                                            <col class="col2">
                                            <col class="col3">
                                            <col class="col4">
                                            <col class="col5">
                                            <col class="col6">
                                            <col class="col7">
                                            <col class="col8">
                                            <col class="col9">
                                            <col class="col10">
                                            <col class="col11">
                                            <col class="col12">
                                            <col class="col13">
                                            <col class="col14">
                                            <tbody>
                                              <tr class="row0">
                                                <td class="column0 style5 s style7" colspan="15">PERFIL DE GENERATIVIDAD / VULNERABILIDAD</td>
                                              </tr>
                                              <tr class="row1">
                                                <td class="column0 style8 s style10" colspan="15">(Adaptaci√≥n del modelo solidario del ICBF. 2008)</td>
                                              </tr>
                                              <tr class="row2">
                                                <td class="column0 style11 s style19" colspan="6" rowspan="4">Indicadores de cada par√°metro</td>
                                                <td class="column6 style11 s style19" colspan="3" rowspan="4">Criterios de generatividad y vulnerabilidad</td>
                                                <td class="column9 style20 s style22" colspan="6">Escala</td>
                                              </tr>
                                              <tr class="row3">
                                                <td class="column9 style23 s style25" colspan="6">Vulnerabilidad / Generatividad</td>
                                              </tr>
                                              <tr class="row4">
                                                <td class="column9 style26 null style28" colspan="6"></td>
                                              </tr>
                                              <tr class="row5">
                                                <td class="column9 style1 n" style="background: rgb(179, 177, 177);">1</td>
                                                <td class="column10 style1 n" style="background: rgb(179, 177, 177);">2</td>
                                                <td class="column11 style1 n" style="background: rgb(179, 177, 177);">3</td>
                                                <td class="column12 style1 n" >4</td>
                                                <td class="column13 style1 n">5</td>
                                                <td class="column14 style1 n">6</td>
                                              </tr>
                                              <tr class="row6">
                                                <td class="column0 style29 s style34" colspan="6" rowspan="2">Red vincular: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Constituida por miembros de la familia que conviven en el momento, parientes con los que cuentan, instituciones que dan apoyo, grupos pol√≠ticos, religiosos, deportivos, sociales, etc. a los que pertenece</span></td>
                                                <td class="column6 style35 s style37" colspan="3">1.Peque√±o tama√±o y o desligamiento de la red familiar-red suficiente y v√≠nculos familiares significativos.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild1" name="smallchild" value="1" <%- HC_datos.smallchild == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild1"></label>
                                                    </div>
                                                </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild2" name="smallchild" value="2" <%- HC_datos.smallchild == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild2"></label>
                                                    </div>
                                                </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild3" name="smallchild" value="3" <%- HC_datos.smallchild == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild3"></label>
                                                    </div>
                                                </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild4" name="smallchild" value="4" <%- HC_datos.smallchild == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild4"></label>
                                                    </div>
                                                </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild5" name="smallchild" value="5" <%- HC_datos.smallchild == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild5"></label>
                                                    </div>
                                                </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="smallChild6" name="smallchild" value="6" <%- HC_datos.smallchild == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="smallChild6"></label>
                                                    </div>
                                                </td>
                                              </tr>
                                              <tr class="row7">
                                                <td class="column6 style38 s style40" colspan="3">2.Escasez/suficiencia de fuentes de apoyo social e institucional</td>
                                                <td class="column9 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes1" name="escasexFuentes"  value="1" <%- HC_datos.escasexFuentes == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasexFuentes1"></label>
                                                    </div>
                                                </td>
                                                <td class="column10 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes2" name="escasexFuentes"  value="2" <%- HC_datos.escasexFuentes == '2' ? 'checked' : '' %>> 
                                                        <label class="form-check-label" for="escasexFuentes2"></label>
                                                    </div>
                                                </td>
                                                <td class="column11 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes3" name="escasexFuentes"  value="3" <%- HC_datos.escasexFuentes == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasexFuentes3"></label>
                                                    </div>
                                                </td>
                                                <td class="column12 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes4" name="escasexFuentes"  value="4" <%- HC_datos.escasexFuentes == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasexFuentes4"></label>
                                                    </div>
                                                </td>
                                                <td class="column13 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes5" name="escasexFuentes"  value="5" <%- HC_datos.escasexFuentes == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasexFuentes5"></label>
                                                    </div>
                                                </td>
                                                <td class="column14 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasexFuentes6" name="escasexFuentes"  value="6" <%- HC_datos.escasexFuentes == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasexFuentes6"></label>
                                                    </div>
                                                </td>
                                              </tr>
                                              <tr class="row8">
                                                <td class="column0 style29 s style46" colspan="6" rowspan="5">Filiaci√≥n: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Tipos de v√≠nculos entre miembros de la familia y su red; consanguinidad; parento-filiales; adopci√≥n; custodia; patria potestad; conyugales: tipo de uni√≥n; econ√≥micos: dependencia- autonom√≠a econ√≥mica de los miembros; sociales: pertenencia-anonimato-exclusi√≥n de su comunidad.</span></td>
                                                <td class="column6 style47 s style49" colspan="3">Confusiones o conflictos/caridad y acuerdo en:</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check" >
                                                        <input   type="radio" class="form-check-input" id="confusion1" name="confusion"  value="1" <%- HC_datos.confusion == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion1"></label>
                                                    </div>
                                                </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check" >
                                                        <input   type="radio" class="form-check-input" id="confusion2" name="confusion"  value="2" <%- HC_datos.confusion == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion2"></label>
                                                    </div>
                                                </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check" >
                                                        <input   type="radio" class="form-check-input" id="confusion3" name="confusion"  value="3" <%- HC_datos.confusion == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion3"></label>
                                                    </div>
                                                </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="confusion4" name="confusion"  value="4" <%- HC_datos.confusion == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion4"></label>
                                                    </div>
                                                </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="confusion5" name="confusion"  value="5" <%- HC_datos.confusion == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion5"></label>
                                                    </div>
                                                </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="confusion6" name="confusion"  value="6" <%- HC_datos.confusion == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="confusion6"></label>
                                                    </div>
                                                </td>
                                              </tr>
                                              <tr class="row9">
                                                <td class="column6 style50 s style52" colspan="3">1. Vinculo parento-filiales.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco1" name="vinculoParentezco"  value="1" <%- HC_datos.vinculoParentezco == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco1"></label>
                                                    </div>
                                                </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco2" name="vinculoParentezco"  value="2" <%- HC_datos.vinculoParentezco == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco2"></label>
                                                    </div>
                                                </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco3" name="vinculoParentezco"  value="3" <%- HC_datos.vinculoParentezco == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco3"></label>
                                                    </div>
                                                </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco4" name="vinculoParentezco"  value="4" <%- HC_datos.vinculoParentezco == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco4"></label>
                                                    </div>
                                                </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco5" name="vinculoParentezco"  value="5" <%- HC_datos.vinculoParentezco == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco5"></label>
                                                    </div>
                                                </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoParentezco6" name="vinculoParentezco"  value="6" <%- HC_datos.vinculoParentezco == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoParentezco6"></label>
                                                    </div>
                                                </td>
                                              </tr>
                                              <tr class="row10">
                                                <td class="column6 style50 s style52" colspan="3">2. V√≠nculos conyugales.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue1" name="vinculoConyugue"  value="1" <%- HC_datos.vinculoConyugue == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue2" name="vinculoConyugue"  value="2" <%- HC_datos.vinculoConyugue == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue3" name="vinculoConyugue"  value="3" <%- HC_datos.vinculoConyugue == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue4" name="vinculoConyugue"  value="4" <%- HC_datos.vinculoConyugue == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue5" name="vinculoConyugue"  value="5" <%- HC_datos.vinculoConyugue == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoConyugue6" name="vinculoConyugue"  value="6" <%- HC_datos.vinculoConyugue == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoConyugue6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row11">
                                                <td class="column6 style50 s style52" colspan="3">3. V√≠nculos econ√≥micos.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos1" name="vinculoEconomicos"  value="1" <%- HC_datos.vinculoEconomicos == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos2" name="vinculoEconomicos"  value="2" <%- HC_datos.vinculoEconomicos == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos3" name="vinculoEconomicos"  value="3" <%- HC_datos.vinculoEconomicos == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos4" name="vinculoEconomicos"  value="4" <%- HC_datos.vinculoEconomicos == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos5" name="vinculoEconomicos"  value="5" <%- HC_datos.vinculoEconomicos == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="vinculoEconomicos6" name="vinculoEconomicos"  value="6" <%- HC_datos.vinculoEconomicos == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="vinculoEconomicos6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row12">
                                                <td class="column6 style53 s style55" colspan="3">4. Exclusi√≥n/inclusi√≥n en la comunidad</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad1" name="exclusionComunidad"  value="1" <%- HC_datos.exclusionComunidad == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad2" name="exclusionComunidad"  value="2" <%- HC_datos.exclusionComunidad == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad3" name="exclusionComunidad"  value="3" <%- HC_datos.exclusionComunidad == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad4" name="exclusionComunidad"  value="4" <%- HC_datos.exclusionComunidad == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad5" name="exclusionComunidad"  value="5" <%- HC_datos.exclusionComunidad == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="exclusionComunidad6" name="exclusionComunidad"  value="6" <%- HC_datos.exclusionComunidad == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="exclusionComunidad6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row13">
                                                <td class="column0 style56 s style34" colspan="6" rowspan="2">Sociocultural: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Circunstancias y valores sociales, tradicionales, religiosos y pol√≠ticos relevantes; sentido atribuido a los eventos que motivan el contacto; circunstancias sociales y pol√≠ticas especificas que inciden sobre el proceso de atenci√≥n</span><span style="font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt"> </span></td>
                                                <td class="column6 style59 s style61" colspan="3">1.Circunstancias sociales y pol√≠ticas agravan el problema/favorecen su soluci√≥n.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial1" name="circunstanciaSocial"  value="1" <%- HC_datos.circunstanciaSocial == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial2" name="circunstanciaSocial"  value="2" <%- HC_datos.circunstanciaSocial == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial3" name="circunstanciaSocial"  value="3" <%- HC_datos.circunstanciaSocial == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial4" name="circunstanciaSocial"  value="4" <%- HC_datos.circunstanciaSocial == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial5" name="circunstanciaSocial"  value="5" <%- HC_datos.circunstanciaSocial == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaSocial6" name="circunstanciaSocial"  value="6" <%- HC_datos.circunstanciaSocial == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaSocial6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row14">
                                                <td class="column6 style38 s style40" colspan="3">2.Circunstancias sociales y pol√≠ticas obstaculizan/favorecen la intervenci√≥n</td>
                                                <td class="column9 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica1" name="circunstanciaPolitica"  value="1" <%- HC_datos.circunstanciaPolitica == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica2" name="circunstanciaPolitica"  value="2" <%- HC_datos.circunstanciaPolitica == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica3" name="circunstanciaPolitica"  value="3" <%- HC_datos.circunstanciaPolitica == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica4" name="circunstanciaPolitica"  value="4" <%- HC_datos.circunstanciaPolitica == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica5" name="circunstanciaPolitica"  value="5" <%- HC_datos.circunstanciaPolitica == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="circunstanciaPolitica6" name="circunstanciaPolitica"  value="6" <%- HC_datos.circunstanciaPolitica == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="circunstanciaPolitica6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row15">
                                                <td class="column0 style62 s style64" colspan="6">Vulnerabilidad Social: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Riesgos/aprobaci√≥n de recursos. condiciones y acceso a: vivienda, salud, educaci√≥n, ingreso/empleo, servicios p√∫blicos, calidad del entorno ambiental, transporte, equipamiento de servicios, etc.</span></td>
                                                <td class="column6 style65 s style67" colspan="3">Escasa/suficiente aprobaci√≥n de recursos para el bienestar socioecon√≥mico de la familia y el afrontamiento de sus problemas.</td>
                                                <td class="column9 style4 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente1" name="escasaSuficiente"  value="1" <%- HC_datos.escasaSuficiente == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style4 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente2" name="escasaSuficiente"  value="2" <%- HC_datos.escasaSuficiente == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style4 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente3" name="escasaSuficiente"  value="3" <%- HC_datos.escasaSuficiente == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style4 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente4" name="escasaSuficiente"  value="4" <%- HC_datos.escasaSuficiente == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style4 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente5" name="escasaSuficiente"  value="5" <%- HC_datos.escasaSuficiente == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style4 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="escasaSuficiente6" name="escasaSuficiente"  value="6" <%- HC_datos.escasaSuficiente == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="escasaSuficiente6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row16">
                                                <td class="column0 style56 s style34" colspan="6" rowspan="3">Hist√≥rico y Evolutivo: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Historia/relato encarnado de la familia; ciclo vital de los miembros y de la familia como grupo. Eventos estresantes de la familia y en relaci√≥n con el entorno, de orden afectivo, econ√≥mico, de salud, de cuidado de los miembros, laborales sociopol√≠ticos etc.</span></td>
                                                <td class="column6 style59 s style61" colspan="3">1.Existen/no existen eventos de la historia familiar que frenan su desarrollo.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria1" name="existenHistoria"  value="1" <%- HC_datos.existenHistoria == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria2" name="existenHistoria"  value="2" <%- HC_datos.existenHistoria == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria3" name="existenHistoria"  value="3" <%- HC_datos.existenHistoria == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria4" name="existenHistoria"  value="4" <%- HC_datos.existenHistoria == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria5" name="existenHistoria"  value="5" <%- HC_datos.existenHistoria == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="existenHistoria6" name="existenHistoria"  value="6" <%- HC_datos.existenHistoria == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="existenHistoria6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row17">
                                                <td class="column6 style50 s style52" colspan="3">2.Sobrecarga de demandas de los m miembros en diferentes etapas evolutivas/adecuadas demandas para los recursos familiares.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga1" name="sobrecarga"  value="1" <%- HC_datos.sobrecarga == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga2" name="sobrecarga"  value="2" <%- HC_datos.sobrecarga == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga3" name="sobrecarga"  value="3" <%- HC_datos.sobrecarga == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga4" name="sobrecarga"  value="4" <%- HC_datos.sobrecarga == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga5" name="sobrecarga"  value="5" <%- HC_datos.sobrecarga == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="sobrecarga6" name="sobrecarga"  value="6" <%- HC_datos.sobrecarga == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="sobrecarga6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row18">
                                                <td class="column6 style38 s style40" colspan="3">3.Alta/baja acumulaci√≥n de eventos estresantes en los √∫ltimos dos a√±os.</td>
                                                <td class="column9 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos1" name="altaBajaEventos"  value="1" <%- HC_datos.altaBajaEventos == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos2" name="altaBajaEventos"  value="2" <%- HC_datos.altaBajaEventos == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos3" name="altaBajaEventos"  value="3" <%- HC_datos.altaBajaEventos == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos4" name="altaBajaEventos"  value="4" <%- HC_datos.altaBajaEventos == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos5" name="altaBajaEventos"  value="5" <%- HC_datos.altaBajaEventos == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="altaBajaEventos6" name="altaBajaEventos" value="6" <%- HC_datos.altaBajaEventos == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="altaBajaEventos6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row19">
                                                <td class="column0 style29 s style31" colspan="6">Jur√≠dico: <span style="color:#000000; font-family:'Arial'; font-size:10pt">Procesos activos pendientes sobre asuntos de filiaci√≥n y de cumplimiento de deberes conyugales, parentofiliales, otros proceso con la justicia ordinaria</span><span style="font-weight:bold; color:#000000; font-family:'Arial'; font-size:10pt"> </span></td>
                                                <td class="column6 style71 s style73" colspan="3">Presencia ausencia de procesos jur√≠dicos que interfieren en la vida familiar.</td>
                                                <td class="column9 style80 null style80" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia1" name="presenciaAusencia"  value="1" <%- HC_datos.presenciaAusencia == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style80 null style80" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia2" name="presenciaAusencia"  value="2" <%- HC_datos.presenciaAusencia == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style80 null style80" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia3" name="presenciaAusencia"  value="3" <%- HC_datos.presenciaAusencia == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style80 null style80">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia4" name="presenciaAusencia"  value="4" <%- HC_datos.presenciaAusencia == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style80 null style80">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia5" name="presenciaAusencia"  value="5" <%- HC_datos.presenciaAusencia == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style80 null style80">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="presenciaAusencia6" name="presenciaAusencia"  value="6" <%- HC_datos.presenciaAusencia == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="presenciaAusencia6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row22">
                                                <td class="column0 style83 s style85" colspan="6">Din√°mico Relacional:</td>
                                                <td class="column6 style50 s style52" colspan="3">1.Conflicto/armon√≠a conyugal.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia1" name="conflictoArmonia"  value="1" <%- HC_datos.conflictoArmonia == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoArmonia1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia2" name="conflictoArmonia"  value="2" <%- HC_datos.conflictoArmonia == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoArmonia2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia3" name="conflictoArmonia"  value="3" <%- HC_datos.conflictoArmonia == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoArmonia3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia4" name="conflictoArmonia"  value="4" <%- HC_datos.conflictoArmonia == '4' ? 'checked' : '' %>>  
                                                        <label class="form-check-label" for="conflictoArmonia4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia5" name="conflictoArmonia"  value="5" <%- HC_datos.conflictoArmonia == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoArmonia5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoArmonia6" name="conflictoArmonia"  value="6" <%- HC_datos.conflictoArmonia == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoArmonia6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row23">
                                                <td class="column0 style86 s style88" colspan="6">- Estilo de vinculaci√≥n emocional y expresi√≥n afectiva.</td>
                                                <td class="column6 style50 s style52" colspan="3">2.Conflicto/ armon√≠a padre ‚Äì hijos.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo1" name="conflictoPadreHijo"  value="1" <%- HC_datos.conflictoPadreHijo == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo2" name="conflictoPadreHijo"  value="2" <%- HC_datos.conflictoPadreHijo == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo3" name="conflictoPadreHijo"  value="3" <%- HC_datos.conflictoPadreHijo == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo4" name="conflictoPadreHijo"  value="4" <%- HC_datos.conflictoPadreHijo == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo5" name="conflictoPadreHijo"  value="5" <%- HC_datos.conflictoPadreHijo == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoPadreHijo6" name="conflictoPadreHijo"  value="6" <%- HC_datos.conflictoPadreHijo == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoPadreHijo6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row24">
                                                <td class="column0 style86 s style88" colspan="6">- Estilo de organizaci√≥n familiar: toma de decisiones, resoluci√≥n de conflictos, disciplina, ejerci√≥ de la autoridad.</td>
                                                <td class="column6 style50 s style52" colspan="3">3.Conflicto/ armon√≠a madre ‚Äì hijos.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo1" name="conflictoMadreHijo"  value="1" <%- HC_datos.conflictoMadreHijo == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo2" name="conflictoMadreHijo"  value="2" <%- HC_datos.conflictoMadreHijo == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo3" name="conflictoMadreHijo"  value="3" <%- HC_datos.conflictoMadreHijo == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo4" name="conflictoMadreHijo"  value="4" <%- HC_datos.conflictoMadreHijo == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo5" name="conflictoMadreHijo"  value="5" <%- HC_datos.conflictoMadreHijo == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoMadreHijo6" name="conflictoMadreHijo"  value="6" <%- HC_datos.conflictoMadreHijo == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoMadreHijo6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row25">
                                                <td class="column0 style89 null style91" colspan="6"></td>
                                                <td class="column6 style50 s style52" colspan="3">4.Conflicto/ armon√≠a entre hermanos.</td>
                                                <td class="column9 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos1" name="conflictoHermanos" value="1" <%- HC_datos.conflictoHermanos == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos2" name="conflictoHermanos" value="2" <%- HC_datos.conflictoHermanos == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style2 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos3" name="conflictoHermanos"  value="3" <%- HC_datos.conflictoHermanos == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos4" name="conflictoHermanos"  value="4" <%- HC_datos.conflictoHermanos == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos5" name="conflictoHermanos"   value="5" <%- HC_datos.conflictoHermanos == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style2 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoHermanos6" name="conflictoHermanos"  value="6" <%- HC_datos.conflictoHermanos == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoHermanos6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row26">
                                                <td class="column0 style26 null style28" colspan="6"></td>
                                                <td class="column6 style38 s style40" colspan="3">5.Conflicto/ armon√≠a con familia extensa.</td>
                                                <td class="column9 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa1" name="conflictoExtensa"  value="1" <%- HC_datos.conflictoExtensa == '1' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa1"></label>
                                                    </div>
                                               </td>
                                                <td class="column10 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa2" name="conflictoExtensa"  value="2" <%- HC_datos.conflictoExtensa == '2' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa2"></label>
                                                    </div>
                                               </td>
                                                <td class="column11 style3 null" style="background: rgb(179, 177, 177);">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa3" name="conflictoExtensa"  value="3" <%- HC_datos.conflictoExtensa == '3' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa3"></label>
                                                    </div>
                                               </td>
                                                <td class="column12 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa4" name="conflictoExtensa"  value="4" <%- HC_datos.conflictoExtensa == '4' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa4"></label>
                                                    </div>
                                               </td>
                                                <td class="column13 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa5" name="conflictoExtensa"  value="5" <%- HC_datos.conflictoExtensa == '5' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa5"></label>
                                                    </div>
                                               </td>
                                                <td class="column14 style3 null">
                                                    <div class="form-check">
                                                        <input   type="radio" class="form-check-input" id="conflictoExtensa6" name="conflictoExtensa"  value="6" <%- HC_datos.conflictoExtensa == '6' ? 'checked' : '' %>>
                                                        <label class="form-check-label" for="conflictoExtensa6"></label>
                                                    </div>
                                               </td>
                                              </tr>
                                              <tr class="row27">
                                                <td class="column0 style92 s style94" colspan="15">1= Factor de alto riesgo de disoluci√≥n, de desprotecci√≥n o de conflicto, 2= Factor de riesgo moderado, 3= Factor de ligero riesgo , 4= Incipiente factor de generatividad, 5= Importante factor de generatividad, 6= Es su principal factor de generatividad.</td>
                                              </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row">
                                    <p> Comprensi√≥n del Perfil de Generatividad-Vulnerabilidad: Aspectos significativos para comprender el caso </p> 
                                    <textarea id="comprensionPerfil" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                data-length="5000" data-position="top" data-delay="50"
                                                data-tooltip="Comprensi√≥n del Perfil."
                                                style="width: 100%;"><%= HC_datos.comprensionGeneratividad %> </textarea>
                                </div>
                            </span></div>
                        </li>
                        <li>
                            <div class="collapsible-header"><i class="material-icons">assignment</i>Evaluaci√≥n</div>
                            <div class="collapsible-body"><span>
                                <div class="row">
                                        <% if(Cita.aprobadoEvaluacion){ %>
                                            <button  data-target="modal_consulta" class="btn  green" id="" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoEvaluacion')">
                                                <i class="material-icons">check_circle</i>
                                                <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                            </button>
                                        <% }else{ %>
                                        <button  data-target="modal_evaluacion" class="btn modal-trigger" id="comentEvaluacion" title="Comentarios">
                                            <i class="material-icons">question_answer</i>
                                            <span>Observaciones</span> 
                                        </button>
                                        <% } %>
                                    <div class="col s12">
                                        <p> Perspectiva vital del sistema consultante:   Visualizaci√≥n del futuro y de los proyectos del sistema consultante.  </p> 
                                        <textarea id="lecturaEcosistema1" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Lectura ecosist√©mica."
                                            style="width: 100%;"><%= HC_datos.lecturaEcopsistema1 %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p>Portador de los s√≠ntomas: Describa al portador de los s√≠ntomas en t√©rminos de su desarrollo, intelectual- cognitivo, interpersonal, 
                                            su funcionamiento emocional, su estilo para solucionar sus problemas, su proyecto vital y los s√≠ntomas espec√≠ficos si los tiene.   </p> 
                                        <textarea id="lecturaEcosistema2" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Lectura ecosist√©mica."
                                            style="width: 100%;"><%= HC_datos.lecturaEcopsistema2 %></textarea>
                                    </div>
                                </div>
                            </span></div>
                        </li>
                        <li>
                            <div class="collapsible-header"><i class="material-icons">bubble_chart</i>Proceso terap√©utico</div>
                            <div class="collapsible-body"><span>
                                <div class="row">
                                    <% if(Cita.aprobadoProceso){ %>
                                        <button  class="btn green" id="" title="Aprobado" onclick="DesaAprobarCitaSuper('aprobadoProceso')">
                                            <i class="material-icons">check_circle</i>
                                            <span style="position: relative; bottom: 4px;"> Aprobado</span>
                                        </button>  
    
                                    <% }else{ %>
                                    
                                        <button  data-target="modal_proceso" class="btn modal-trigger" id="comentProceso" title="Comentarios">
                                            <i class="material-icons">question_answer</i>
                                            <span>Observaciones</span> 
                                        </button>
                                    
                                       <% } %>        
                                    <div class="col s12">
                                        <p> Lectura ecosist√©mica del problema acordado con el y/o los consultante(s) como objeto de intervenci√≥n:  </p> 
                                        <textarea id="lecturaEcosistema3" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Lectura ecosist√©mica."
                                            style="width: 100%;"><%= HC_datos.lecturaEcopsistema3 %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p> Objetivos terap√©uticos acordados con el y/o los consultante(s):  </p> 
                                            <textarea id="objectivoTerapeuticos" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                data-length="5000" data-position="top" data-delay="50"
                                                data-tooltip="Objetivos terap√©uticos."
                                                style="width: 100%;"><%= HC_datos.objectivoTerapeticos %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p>Hip√≥tesis: (Referentes conceptuales y autorreferenciales, sobre los cuales se fundamenta su lectura de caso)</p>
                                        <textarea id="hipotesisPrimeraVez" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Hip√≥tesis: (Referentes conceptuales y autorreferenciales, sobre los cuales se fundamenta su lectura de caso)"
                                            ><%= HC_datos.hipotesisPrimeraVez %></textarea>
                                    </div> 
                                    <div class="col s12">
                                        <p> Estrategia concertada: (Descripci√≥n de las acciones a desarrollar durante el proceso interventivo, que se articulan con el objetivo e hip√≥tesis):  </p> 
                                            <textarea id="EstratgiaConcentrada" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                        data-length="5000" data-position="top" data-delay="50"
                                                        data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                        style="width: 100%;"><%= HC_datos.estrategiaConcertada %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p> Evaluaci√≥n del proceso por parte del terapeuta: (Caracterizaci√≥n del sistema terap√©utico con base en los procesos autorreferenciales, heterorreferenciales y la prospectiva del terapeuta:  </p> 
                                            <textarea id="evaluacionProceso" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                        data-length="5000" data-position="top" data-delay="50"
                                                        data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                        style="width: 100%;"><%= HC_datos.evaluacionProcesoTerapeutica %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p> Otras personas, instituciones o redes convocadas a la sesi√≥n en calidad de qu√©,  y si asistieron. :  </p> 
                                            <textarea id="OtasInstituciones" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                        data-length="5000" data-position="top" data-delay="50"
                                                        data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                        style="width: 100%;"><%= HC_datos.OtrasPersonas %></textarea>
                                    </div>
                                    <div class="col s12">
                                        <p> Aportes del equipo de supervisi√≥n a la evaluaci√≥n e intervenci√≥n del caso:  </p> 
                                            <textarea id="AporteSupervision" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                                        data-length="5000" data-position="top" data-delay="50"
                                                        data-tooltip="Este campo es para los valores predetemrinado o los texto debajo de la firma o separador."
                                                        style="width: 100%;" ><%= HC_datos.aportesSupervision %></textarea>
                                    </div>
                                </div>
                            </span></div>
                        </li>
                        <li>
                            <div class="collapsible-header"><i class="material-icons">filter_drama</i>Diagn√≥stico</div>
                            <div class="collapsible-body"><span>
                                <div class="row">
                                    <div class="input-field col s6">    
                                        <select name="" id="Finalidad">
                                          <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="01" <%- HC_datos.FinalidadConsulta == '01' ? 'selected' : '' %>>Atenci√≥n del parto (puerperio)</option>
                                            <option value="02" <%- HC_datos.FinalidadConsulta == '02' ? 'selected' : '' %>>Atenci√≥n del reci√©n nacido</option>
                                            <option value="03" <%- HC_datos.FinalidadConsulta == '03' ? 'selected' : '' %>>Atenci√≥n en planificaci√≥n familiar</option>
                                            <option value="04" <%- HC_datos.FinalidadConsulta == '04' ? 'selected' : '' %>>Detecci√≥n de alteraciones de crecimiento y desarrollo del menor de diez a√±os</option>
                                            <option value="05" <%- HC_datos.FinalidadConsulta == '05' ? 'selected' : '' %>>Detecci√≥n de alteraci√≥n del desarrollo joven</option>
                                            <option value="06" <%- HC_datos.FinalidadConsulta == '06' ? 'selected' : '' %>>Detecci√≥n de alteraciones del embarazo</option>
                                            <option value="07" <%- HC_datos.FinalidadConsulta == '07' ? 'selected' : '' %>>Detecci√≥n de alteraciones del adulto</option>
                                            <option value="08" <%- HC_datos.FinalidadConsulta == '08' ? 'selected' : '' %>>Detecci√≥n de alteraciones de agudeza visual</option>
                                            <option value="09" <%- HC_datos.FinalidadConsulta == '09' ? 'selected' : '' %>>Detecci√≥n de enfermedad profesional</option>
                                            <option value="10" <%- HC_datos.FinalidadConsulta == '10' ? 'selected' : '' %>>No aplica</option>
                                        </select>
                                        <label for="Finalidad">Finalidad De La Consulta</label>
                                    </div>
                                    <div class="input-field col s6">    
                                        <select name="" id="causaExterma">
                                            <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="01" <%- HC_datos.causaExterna == '01' ? 'selected' : '' %>>Accidente de trabajo</option>
                                            <option value="02" <%- HC_datos.causaExterna == '02' ? 'selected' : '' %>>Accidente de tr√°nsito</option>
                                            <option value="03" <%- HC_datos.causaExterna == '03' ? 'selected' : '' %>>Accidente r√°bico</option>
                                            <option value="04" <%- HC_datos.causaExterna == '04' ? 'selected' : '' %>>Accidente of√≠dico</option>
                                            <option value="05" <%- HC_datos.causaExterna == '05' ? 'selected' : '' %>>Otro tipo de accidente</option>
                                            <option value="06" <%- HC_datos.causaExterna == '06' ? 'selected' : '' %>>Evento catastr√≥fico</option>
                                            <option value="07" <%- HC_datos.causaExterna == '07' ? 'selected' : '' %>>Lesi√≥n por agresi√≥n</option>
                                            <option value="08" <%- HC_datos.causaExterna == '08' ? 'selected' : '' %>>Lesi√≥n auto infligida</option>
                                            <option value="09" <%- HC_datos.causaExterna == '09' ? 'selected' : '' %>>Sospecha de maltrato f√≠sico</option>
                                            <option value="10" <%- HC_datos.causaExterna == '10' ? 'selected' : '' %>>Sospecha de abuso sexual</option>
                                            <option value="11" <%- HC_datos.causaExterna == '11' ? 'selected' : '' %>>Sospecha de violencia sexual</option>
                                            <option value="12" <%- HC_datos.causaExterna == '12' ? 'selected' : '' %>>Sospecha de maltrato emocional</option>
                                            <option value="13" <%- HC_datos.causaExterna == '13' ? 'selected' : '' %>>Enfermedad general</option>
                                            <option value="14" <%- HC_datos.causaExterna == '14' ? 'selected' : '' %>>Enfermedad laboral</option>
                                            <option value="15" <%- HC_datos.causaExterna == '15' ? 'selected' : '' %>>Otra</option>
                                        </select>
                                        <label for="causaExterma">Causa Externa</label>
                                    </div>                               
                                <div class="input-field col s4">
                                    <input type="text" id="diagnosticoPrincipalPV" class="autocomplete-cie10" value="<%= HC_datos.DiagnosticoPP %>">
                                    <label for="diagnosticoPrincipalPV"><b>Diagn√≥stico Principal</b></label>
                                </div>
                                <div class="input-field col s4">                
                                        <select id="tipoDiagnostico" class="validate select browse-select">
                                            <option value="" disabled>Elige una opci√≥n</option>
                                            <option value="01 Impresion diagnostica" <%- HC_datos.Diagnostico == '01 Impresion diagnostica' ? 'selected' : '' %>>Impresi√≥n diagn√≥stica </option>
                                            <option value="02 Confirmado nuevo" <%- HC_datos.Diagnostico == '02 Confirmado nuevo' ? 'selected' : '' %>>Confirmado nuevo </option>
                                            <option value="03 Confirmado repetido" <%- HC_datos.Diagnostico == '03 Confirmado repetido' ? 'selected' : '' %>>Confirmado repetido</option>
                                        </select>
                                        <label for="tipoDiagnostico">Tipo De Diagn√≥stico</label>
                                </div>
                                <div class="input-field col s4">
                                    <input type="text" id="diagnosticoSecundarioPV" class="autocomplete-cie10" value="<%= HC_datos.DiagnosticoPS %>">
                                    <label for="diagnosticoSecundarioPV"><b>Diagn√≥stico Secundario</b></label>
                                </div>
                                </div>
                            </span></div>
                        </li><br><br> 
                                <% if (!HistoriaClinica.cerrado) { %>
                                    <% if (user.tipo_profesional == 'colegiado' || user.roles == 'SP') { %>  
                                        <div class="col s6">
                                            <button class="col m12 m12 s12 btn waves-effect green waves-light" id="back_home">
                                                <i class="material-icons">close</i>
                                                <span style="position: relative; bottom: 4px;">Atras</span>
                                            </button>
                                        </div>                             

                                        <% if(Cita.aprobadoMotivoConsul && Cita.aprobadoCaracteristica && Cita.aprobadoCaracteristicaSocio && Cita.aprobadoCiclo && Cita.aprobadoEvaluacion && Cita.aprobadoProceso ){ %>
                                            <div class="col s6">
                                                <button class="col m12 m12 s12 btn waves-effect red waves-light" id="close_data">
                                                    <i class="material-icons">close</i>
                                                    <span style="position: relative; bottom: 4px;"> Cerrado y aprobado el espacio de Caracterizaci√≥n</span>
                                                </button>
                                            </div><br><br>
                                       <% } else{%>
                                        <div class="col s6">
                                            <button class="col m12 m12 s12 btn waves-effect red waves-light" id="" style=" cursor: not-allowed;" readonly>
                                                <i class="material-icons">close</i>
                                                <span style="position: relative; bottom: 4px;"> Cerrado y aprobado el espacio de Caracterizaci√≥n</span>
                                            </button>
                                        </div><br><br>
                                        <% } %>
                                    <% } else { %>
                                        <div class="col s6">
                                            <button class="col m12 m12 s12 btn waves-effect green waves-light" id="enviar_data">
                                            <i class="material-icons">save</i>
                                            <span style="position: relative; bottom: 4px;"> Guardar</span>
                                            </button>
                                        </div><br><br>
                                
                                    <% } %>
                                <% } else{ %>
                                    <li>
                                        <div class="collapsible-header"><i
                                                class="material-icons">edit</i> Firma
                                        </div>
                                        <div class="collapsible-body">
                                            <div class="row">
                                                <div class="file-field input-field  col l6 s12">
                                                    <div class="btn blue">
                                                        <span>Firma Practicante</span> 
                                                    </div>
                                                    <div class="file-path-wrapper">
                                                    </div>
                                                </div>
                                                <div class="file-field input-field  col l6 s12">
                                                    <div class="btn red">
                                                        <span>Firma Supervisor</span>
                                                    </div>
                                                    <div class="file-path-wrapper">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col l6 s6">
                                                    <img src="<%= profesional.foto_firma != null ? profesional.foto_firma.location : 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Imagen_no_disponible.svg/600px-Imagen_no_disponible.svg.png' %>"
                                                        alt="" class="materialboxed"
                                                        style="width:50%" >
                                                </div>
                                                <div class="col l6 s6" id="superFirma">

                                                </div>
                                            </div>   
                                        </div>
                                        
                                    </li><br>

                               <% } %>
    
                        </ul>
                    
                    <% } %> 
                    <% } else {%>

                    <li>
                       

                        <div class="collapsible-header active"><i class="material-icons">assignment</i>
                            <%= formulario.nombre %>
                        </div>
                        <div class="collapsible-body">

                            <div class="row">
                                <input type="hidden" id="historia_clinica_id" value="<%= HistoriaClinica._id %>">
                                <%
                                for (let i = 0; i < formulario.preguntas.length; i++) {
                                    var campo = formulario.preguntas[i];
                                    campo.validar = 'historia-clinica-input';
                                    campo.orden = i;
                                    campo.renderizar = true;
                                    campo.cerrado = HistoriaClinica.cerrado || false;
                                    switch (campo.tipo) {
                                        case 'texto': %>
                                <%- include('../../formularios/campos/texto.ejs', campo) %>
                                <% break;
                                        case 'parrafo': %>
                                <%- include('../../formularios/campos/parrafo.ejs', campo) %>
                                <% break;
                                        case 'numero': %>
                                <%- include('../../formularios/campos/numero.ejs',  campo) %>
                                <% break;
                                        case 'archivo': %>
                                <%- include('../../formularios/campos/archivo.ejs', campo) %>
                                <% break;
                                        case 'imagen': %>
                                <%- include('../../formularios/campos/imagen.ejs',  campo) %>
                                <% break;
                                        case 'separador': %>
                                <%- include('../../formularios/campos/separador.ejs', campo) %>
                                <% break;
                                        case 'firma': %>
                                <%- include('../../formularios/campos/firma.ejs', campo) %>
                                <% break;
                                        case 'cie10': %>
                                <%- include('../../formularios/campos/cie10.ejs', campo) %>
                                <% break;
                                        case 'selector': %>
                                <%- include('../../formularios/campos/selector.ejs',  campo) %>
                                <% break;
                                        default:
                                            break;
                                    }
                                }
                                
                                %>
                                <hr style="border:1px solid #ffffff00">
                                <hr>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="collapsible-header active"><i class="material-icons">dehaze</i>
                            <i class="material-icons">save</i> Diagn√≥stico
                        </div>
                            <div class="collapsible-body">
                               <% if(datos_selectores){ %>
                                <div class="row">
                                    <div class="input-field col s6">    
                                        <select name="" id="FinalidadComercial">
                                          <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="01" <%- datos_selectores[0] == '01' ? 'selected' : '' %>>Atenci√≥n del parto (puerperio)</option>
                                            <option value="02" <%- datos_selectores[0] == '02' ? 'selected' : '' %>>Atenci√≥n del reci√©n nacido</option>
                                            <option value="03" <%- datos_selectores[0] == '03' ? 'selected' : '' %>>Atenci√≥n en planificaci√≥n familiar</option>
                                            <option value="04" <%- datos_selectores[0] == '04' ? 'selected' : '' %>>Detecci√≥n de alteraciones de crecimiento y desarrollo del menor de diez a√±os</option>
                                            <option value="05" <%- datos_selectores[0] == '05' ? 'selected' : '' %>>Detecci√≥n de alteraci√≥n del desarrollo joven</option>
                                            <option value="06" <%- datos_selectores[0] == '06' ? 'selected' : '' %>>Detecci√≥n de alteraciones del embarazo</option>
                                            <option value="07" <%- datos_selectores[0] == '07' ? 'selected' : '' %>>Detecci√≥n de alteraciones del adulto</option>
                                            <option value="08" <%- datos_selectores[0] == '08' ? 'selected' : '' %>>Detecci√≥n de alteraciones de agudeza visual</option>
                                            <option value="09" <%- datos_selectores[0] == '09' ? 'selected' : '' %>>Detecci√≥n de enfermedad profesional</option>
                                            <option value="10" <%- datos_selectores[0] == '10' ? 'selected' : '' %>>No aplica</option>
                                        </select>
                                        <label for="FinalidadComercial">Finalidad De La Consulta</label>
                          
                                    </div>
                                    <div class="input-field col s6">    
                                        <select name="" id="causaExtermaComercial">
                                            <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="01" <%- datos_selectores[1] == '01' ? 'selected' : '' %>>Accidente de trabajo</option>
                                            <option value="02" <%- datos_selectores[1] == '02' ? 'selected' : '' %>>Accidente de tr√°nsito</option>
                                            <option value="03" <%- datos_selectores[1] == '03' ? 'selected' : '' %>>Accidente r√°bico</option>
                                            <option value="04" <%- datos_selectores[1] == '04' ? 'selected' : '' %>>Accidente of√≠dico</option>
                                            <option value="05" <%- datos_selectores[1] == '05' ? 'selected' : '' %>>Otro tipo de accidente</option>
                                            <option value="06" <%- datos_selectores[1] == '06' ? 'selected' : '' %>>Evento catastr√≥fico</option>
                                            <option value="07" <%- datos_selectores[1] == '07' ? 'selected' : '' %>>Lesi√≥n por agresi√≥n</option>
                                            <option value="08" <%- datos_selectores[1] == '08' ? 'selected' : '' %>>Lesi√≥n auto infligida</option>
                                            <option value="09" <%- datos_selectores[1] == '09' ? 'selected' : '' %>>Sospecha de maltrato f√≠sico</option>
                                            <option value="10" <%- datos_selectores[1] == '10' ? 'selected' : '' %>>Sospecha de abuso sexual</option>
                                            <option value="11" <%- datos_selectores[1] == '11' ? 'selected' : '' %>>Sospecha de violencia sexual</option>
                                            <option value="12" <%- datos_selectores[1] == '12' ? 'selected' : '' %>>Sospecha de maltrato emocional</option>
                                            <option value="13" <%- datos_selectores[1] == '13' ? 'selected' : '' %>>Enfermedad general</option>
                                            <option value="14" <%- datos_selectores[1] == '14' ? 'selected' : '' %>>Enfermedad laboral</option>
                                            <option value="15" <%- datos_selectores[1] == '15' ? 'selected' : '' %>>Otra</option>
                                        </select>
                                        <label for="causaExtermaComercial">Causa Externa</label>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="input-field col s4">                
                                        <select id="tipoDiagnosticoComercial" class="validate select browse-select">
                                            <option value="" disabled selected>Elige una opci√≥n</option>
                                            <option value="01" <%- datos_selectores[2] == '01' ? 'selected' : '' %>>Impresi√≥n diagn√≥stica </option>
                                            <option value="02" <%- datos_selectores[2] == '02' ? 'selected' : '' %> >Confirmado nuevo </option>
                                            <option value="03" <%- datos_selectores[2] == '03' ? 'selected' : '' %>>Confirmado repetido</option>
                                        </select>
                                        <label for="tipoDiagnosticoComercial">Tipo Diagn√≥stico</label>
                                    </div>
                                    <div class="input-field col s4">                
                                       <input type="text" value="<%= datos_selectores[3] %>" class="autocomplete-cie10" id="diagnosticoPrincipalComercial">
                                       <label for="diagnosticoPrincipalComercial">Diagn√≥stico Principal</label>
                                    </div>
                                    <div class="input-field col s4">                
                                        <input type="text" value="<%= datos_selectores[4] %>" class="autocomplete-cie10" id="diagnosticoSecundarioComercial">
                                        <label for="diagnosticoSecundarioComercial">Diagn√≥stico Secundario</label>
                                     </div>
                                </div>
                                <% } else{ %>
                                    <div class="row">
                                        <div class="input-field col s6">    
                                            <select name="" id="FinalidadComercial">
                                              <option value="" disabled selected>Elige una opci√≥n</option>
                                                <option value="01">Atenci√≥n del parto (puerperio)</option>
                                                <option value="02">Atenci√≥n del reci√©n nacido</option>
                                                <option value="03">Atenci√≥n en planificaci√≥n familiar</option>
                                                <option value="04">Detecci√≥n de alteraciones de crecimiento y desarrollo del menor de diez a√±os</option>
                                                <option value="05">Detecci√≥n de alteraci√≥n del desarrollo joven</option>
                                                <option value="06">Detecci√≥n de alteraciones del embarazo</option>
                                                <option value="07">Detecci√≥n de alteraciones del adulto</option>
                                                <option value="08">Detecci√≥n de alteraciones de agudeza visual</option>
                                                <option value="09">Detecci√≥n de enfermedad profesional</option>
                                                <option value="10">No aplica</option>
                                            </select>
                                            <label for="FinalidadComercial">Finalidad De La Consulta</label>
                                        </div>                                    
                                        <div class="input-field col s6">    
                                            <select name="" id="causaExtermaComercial">
                                                <option value="" disabled selected>Elige una opci√≥n</option>
                                                <option value="01">Accidente de trabajo</option>
                                                <option value="02">Accidente de tr√°nsito</option>
                                                <option value="03">Accidente r√°bico</option>
                                                <option value="04">Accidente of√≠dico</option>
                                                <option value="05">Otro tipo de accidente</option>
                                                <option value="06">Evento catastr√≥fico</option>
                                                <option value="07">Lesi√≥n por agresi√≥n</option>
                                                <option value="08">Lesi√≥n auto infligida</option>
                                                <option value="09">Sospecha de maltrato f√≠sico</option>
                                                <option value="10">Sospecha de abuso sexual</option>
                                                <option value="11">Sospecha de violencia sexual</option>
                                                <option value="12">Sospecha de maltrato emocional</option>
                                                <option value="13">Enfermedad general</option>
                                                <option value="14">Enfermedad laboral</option>
                                                <option value="15">Otra</option>
                                            </select>
                                            <label for="causaExtermaComercial">Causa Externa</label>
                                        </div>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="input-field col s4">                
                                            <select id="tipoDiagnosticoComercial" class="validate select browse-select">
                                                <option value="" disabled selected>Elige una opci√≥n</option>
                                                <option value="01 Impresion diagnostica">Impresi√≥n diagn√≥stica </option>
                                                <option value="02 Confirmado nuevo">Confirmado nuevo </option>
                                                <option value="03 Confirmado repetido">Confirmado repetido</option>
                                            </select>
                                            <label for="tipoDiagnosticoComercial">Tipo Diagn√≥stico</label>
                                        </div>
                                        <div class="input-field col s4">   
                                            <%- include('../../formularios/campos/cie10.ejs',{renderizar: true, cerrado: false, nombre: 'CIE10 Primario', id : 'diagnosticoPrincipalComercial', ancho: '12', validar: 'campo', orden: 'ejemplo', value: "Diagn√≥stico Principal"}) %>             

                                        </div>
                                        <div class="input-field col s4">   
                                            <%- include('../../formularios/campos/cie10.ejs',{renderizar: true, cerrado: false, nombre: 'CIE10 Primario', id : 'diagnosticoSecundarioComercial', ancho: '12', validar: 'campo', orden: 'ejemplo', value: "Diagn√≥stico Secundario"}) %>             

                                        </div>
                                    </div>
                                <% } %>

                                <!-- <div class="row">
                                    <div class="col m4">
                                      Diagnostico principal
                                    </div>
                                    <div class="col s6">
                                        <%- include('../../formularios/campos/cie10.ejs', campo) %>
                                    </div>
                                </div> -->
                             </div>
                    </li>
                    <li>
                        <div class="collapsible-header active"><i class="material-icons">dehaze</i>
                            <i class="material-icons">folder_shared</i> Remisi√≥n
                        </div>
                            <div class="collapsible-body">
                                <a class="waves-effect waves-light btn modal-trigger col m12 m12 s12 green waves-light" href="#modal_remision">
                                    <i class="material-icons">save</i>
                                    <span style="position: relative; bottom: 4px;"> 
                                        Remisi√≥n servicios externos
                                </a><br><br>
                            </div>
                    </li>        
                    <% } %>
                    <% if (!HistoriaClinica.cerrado) { %>
                        <% if(sede_id == '60049afed00d9b43a49e4da7') { %>
                        
                        <% } else {%>
                    <li>
                        <div class="collapsible-header active"><i class="material-icons">dehaze</i>
                            <i class="material-icons">save</i> Gesti√≥n de Historia Cl√≠nica
                        </div>
                        <div class="collapsible-body">
                          
                            <a class="waves-effect waves-light btn-large red lighten-1 center" id="cerrar_historia">
                                <i class="material-icons left">save</i> Cerrar Historia Cl√≠nica
                            </a>
                            
                                <a class="waves-effect waves-light btn-large light-blue lighten-1 center"
                                id="guardar_historia">
                                <i class="material-icons left">save</i> Guardar Historia Cl√≠nica
                            </a> 

                            
                            
                        </div>
                    </li>
                    <% } %>
                       
                    <% } %>
                </ul>
            </div>
        </div>
    </div>
</section>
<div class="modal" id="modal_remision" style="width: 90%;">
    <div class="modal-content">
        <div class="modal-header">
            <div class="row">
              <form class="col s12">
                <div class="row">
                  <div class="col s6">
                  </div>
                  <div class="col s6">                
                    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat" style="margin-left: 89%;">
                      <i class="material-icons">close</i>
                      <span style="position: relative; bottom: 4px;"> </span>
                    </a>
                  </div>
                </div>
              </form>
            </div>
          </div>  
        <div class="col s6 offset-s6">
            <a id="addtablecups" class="waves-effect btn-flat col m12 s12 btn waves-effect primary waves-light">
                <i class="material-icons">add_circle</i>
                <span style="position: relative; bottom: 4px;"> Agregar cups</span>
            </a>
        </div>
        <div class="col s12">
            <table id="exampleCups"  class="bordered highlight responsive-table centered">
                <thead class="">
                <tr>
                    <th>Cups</th>
                    <th>#</th>
                </tr>
                </thead>
                <tbody id="table_cups">

                </tbody>
            </table>
        </div><br>
        <div class="row">
            <div class="col s6">
              Motivo de remisi√≥n: 
            </div>
                <div  class="input-field col s12">
                  <textarea  id="motivoRemision" type="text" value="" class="materialize-textarea clean_on_create tooltipped" data-tooltip="Observaciones y apreciaciones del supervisor."></textarea>
              </div>
        </div>
        <div class="row">
            <div class="col s6">
              Diagn√≥stico Principal: 
            </div>
             <div  class="input-field col s12">
                    <%- include('../../formularios/campos/cie10.ejs',{renderizar: true, cerrado: false, nombre: 'CIE10 Primario', id : 'diagnosticoPrincipalRemi', ancho: '12', validar: 'campo', orden: 'ejemplo', value: "Valor: Diagn√≥stico"}) %>
              </div>
        </div>
        <div class="row">
            <div class="col s6">
              Diagn√≥stico Secundario: 
            </div>
             <div  class="input-field col s12">
                    <%- include('../../formularios/campos/cie10.ejs',{renderizar: true, cerrado: false, nombre: 'CIE10 Primario', id : 'diagnosticoSegundarioRemi', ancho: '12', validar: 'campo', orden: 'ejemplo', value: "Valor: Diagn√≥stico"}) %>
              </div>
        </div>
        <div class="row">
            <div class="col s6">
              Observaciones: 
            </div>
                <div  class="input-field col s12">
                  <textarea  id="Observaciones" type="text" value="" class="materialize-textarea clean_on_create tooltipped" data-tooltip="Observaciones y apreciaciones del supervisor."></textarea>
              </div>
        </div>
        <div class="modal-footer">
            <div class="row">
              
                <div class="row">
                  <div class="col s6">
                  </div>
                  <div class="col s6">
                    <button class="waves-effect btn-flat col m12 m12 s12 btn waves-effect green waves-light" id="remisionDate">
                      <i class="material-icons">save</i>
                      <span style="position: relative; bottom: 4px;"> Guardar</span>
                    </button>
                  </div>
                </div>

            </div>
          </div>
    </div>
</div>
<div class="modal " id="modal_consulta">
        <section>
            <div id="content_timeline">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>" id="value_modal_motivoConsulta" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario Motivo de Consulta."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n </button>
                  <% if(user.roles == "SP"){ %>
                  <button type="button" onclick="AprobarCitaSuper('aprobadoMotivoConsul')" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                  <% } %>
                </div>
          </section>
    </div>
    <div class="modal " id="modal_caracteristica">
        <section>
            <div id="content_timeline_caracteristicas">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_Caracteristicas" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario  de Caracter√≠sticas."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_Caracteristica" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n </button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoCaracteristica')" id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>
              </div>
          </section>
    </div>
    <div class="modal " id="modal_caracteristicaSocio">
        <section>
            <div id="content_timeline_caracteristicasSocio">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_CaracteristicasSocio" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario Caracter√≠sticas sociodemogr√°ficas significativas de los miembros de la familia:."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_CaracteristicaSocio" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n</button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoCaracteristicaSocio')"  id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>
              </div>
          </section>
    </div>
    <div class="modal " id="modal_ciclo">
        <section>
            <div id="content_timeline_ciclo">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea  placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_ciclo" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario CICLO VITAL Transiciones del ciclo evolutivo."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_ciclo" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n</button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoCiclo')"  id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>
              </div>
          </section>
    </div>
    <div class="modal " id="modal_evaluacion">
        <section>
            <div id="content_timeline_evaluacion">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_evaluacion" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario EVALUACI√ìN."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_evaluacion" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n</button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoEvaluacion')"  id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>
              </div>
          </section>
    </div>
    <div class="modal " id="modal_proceso">
        <section>
            <div id="content_timeline_proceso">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_proceso" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario PROCESO TERAP√âUTICO."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_proceso" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n</button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoProceso')"  id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>
              </div>
          </section>
    </div>
    <div class="modal " id="modal_sesion">
        <section>
            <div id="content_timeline_sesion">
    
            </div>
        </section>
          <br >
          <section>
              <div class="row">
                <textarea placeholder="Digite Su Comentario <%= user.nombre %>"  id="value_modal_sesion" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                    data-length="5000" data-position="top" data-delay="50" data-tooltip="Comentario Caracter√≠sticas sociodemogr√°ficas significativas de los miembros de la familia:."  style="width: 100%;"></textarea>
              </div>
              <div class="row">
                  <button type="button" id="btnGuardarComment_sesion" class="waves-effect waves-light btn green waves-light"> Guardar observaci√≥n</button>
                  <% if(user.roles == "SP"){ %>
                    <button type="button" onclick="AprobarCitaSuper('aprobadoSesiones')"  id="btnGuardarComment" class="waves-effect waves-light btn blue waves-light"> Guardar Aprobaci√≥n </button>
                    <% } %>              
                </div>
          </section>
    </div>


<% include  ../../view_distribution/sidebar-right.ejs%>
<% include  ../../view_distribution/bot1.ejs%>
<% include  ../../scripts/convertEJS.ejs%>
<%
var cie10auto = Object({});
for (let i = 0; i < cie10.length; i++) {
  const cie = cie10[i];
  cie10auto[(`${cie.codigo} | ${cie.descripcion}`)] = null
}
%>
<script
    src="https://cdn.jsdelivr.net/combine/npm/fullcalendar@5.3.0,npm/fullcalendar@5.3.0/locales-all.min.js,npm/moment@2.27.0/min/moment-with-locales.min.js">
</script>

<script>

    var sede_id = $('#sede_id').val();
    var HC_id = $('#hc_id').val();
    var paciente_id = $('#paciente_id').val();
    var profesional_id = $('#profesional_id').val();
    var HC_datos = <%-JSON.stringify(HistoriaClinica.datos_formulario) || "{}" %>;
    var HC_firmas = Object({})
    var HC_cerrado = <%-JSON.stringify(HistoriaClinica.cerrado) || 'false' %>;
    var cita_id = $('#cita_id').val()
    var tipo_rol = <%-JSON.stringify(user.roles)%>;
    var cups = <%-JSON.stringify(cups)%>;
    var cupsauto = Object({});
    $.ajax({
            url: `/api/historias-clinicas/paciente/${sede_id}/${paciente_id}`,
            method: 'GET',
            success: function (response) {
                 console.log(">>>>>>>", response)
              for(i=0;i<response.length;i++){
                  var cita = response[i].Cita
                  $('#data_historia').append(`
                  <option ${cita_id == cita._id ? 'selected' : ''} value="${cita._id}">${moment(new Date(cita.start)).locale('es').format("LLL")}</option>
                  `)
              }
              $('#data_historia').material_select()
            },
        })
    for (let i = 0; i < cups.length; i++) {
        const cup = cups[i];
        cupsauto[(`${cup.codigo} | ${cup.nombre}`)] = null;
    }

    if (HC_cerrado) {
        $('.historia-clinica-input').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') != 'archivo') {
                $(this).attr('disabled', true)
            }
        })
    }
    
    if (HC_cerrado) {
        $('textarea').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') != 'archivo') {
                $(this).attr('disabled', true)
            }
        })
        $('select').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') != 'archivo') {
                $(this).attr('disabled', true)
            }
        })
        $('.form-check-input').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') != 'checkbox') {
                $(this).attr('disabled', true)
            }
        })
        $('input').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') != 'checkbox') {
                $(this).attr('disabled', true)
            }
        })
        $('#addTableFamilia').each(function () {
            const campo_id = $(this).attr('id');
                $(this).attr('disabled', true)     
        })
        $('#addTableOtherRedes').each(function () {
            const campo_id = $(this).attr('id');
                $(this).attr('disabled', true)     
        })
        $('#addTable').each(function () {
            const campo_id = $(this).attr('id');
                $(this).attr('disabled', true)     
        })
        
    }
    document.addEventListener('DOMContentLoaded', function() {
        $('#data_historia').removeAttr("disabled")
        var asistio = $('#asistio').val()
        var justificacion = $("#justificacion").val()
        if(asistio=="No"){
            var valoracion = $('#valoracion').val("No asistio").attr("disabled", true)
            var dinamica = $('#dinamica').val("No asistio").attr("disabled", true)
            var objetivo  = $('#objetivo').val("No asistio").attr("disabled", true)
            var hipotesis = $('#hipotesis').val("No asistio").attr("disabled", true)
            var estrategia = $('#estrategia').val("No asistio").attr("disabled", true)
            var cierreSesion = $('#cierreSesion').val("No asistio").attr("disabled", true)
            var tipoDiagnostico = $('#tipoDiagnostico').val("").attr("disabled", true)
            
        }
        if(justificacion=="si"){
            var personaConvocadas = $('#personaConvocadas').attr("disabled", false)   
        }
        $("#divSupervisor").hide();
        $("#divCoterapeutas").hide();
      
      
        if ( $('#sessionCoterapeuta').val() == 'Si')
        {
          $("#divCoterapeutas").show();
        }
        else
        {
          $("#divCoterapeutas").hide();
        }
      
      
        if ( $('#sessionSupervisor').val() == 'Si')
        {
          $("#divSupervisor").show();
        }
        else
        {
          $("#divSupervisor").hide();
        }
      
      
    });
    $(document).ready(function ()   {
        autocompleteCie10('input.autocomplete-cie10');
        autocompleteCUPS('#cups')
        autocompleteSelectores()
        validarTamanio()

                
        const imageElement = document.querySelector("img");
        // set file as image source
        //imageElement.src = window.URL.createObjectURL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAACWCAYAAABkW7XSAAAEaUlEQVR4Xu3UAQkAMAwDwdW/wMrZYC4ergrCpWR29x5HgACBgMAYrEBLIhIg8AUMlkcgQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEDBYfoAAgYyAwcpUJSgBAgbLDxAgkBEwWJmqBCVAwGD5AQIEMgIGK1OVoAQIGCw/QIBARsBgZaoSlAABg+UHCBDICBisTFWCEiBgsPwAAQIZAYOVqUpQAgQMlh8gQCAjYLAyVQlKgIDB8gMECGQEDFamKkEJEHiVihANgjPR+gAAAABJRU5ErkJggg==");

        function getBase64Img() {
            return <%-JSON.stringify(Cita.firma) %>;
        }
        if(sede_id="60049afed00d9b43a49e4da7"){

        $("#cicloVital").change(function (e) {
        let value = String($(this).val())
         if(value === "otras"){
           $('#showOtras').html(`    
                                        <div class="col s12">
                                            <textarea id="otras" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Ciclo Vital"
                                            style="width: 100%;"> </textarea>
                                        </div>`);
        $('#hideOtras').html(` <div class="col s12">
                                            <textarea id="otras" class="materialize-textarea clean_on_create tooltipped" tipo="parrafo"
                                            data-length="5000" data-position="top" data-delay="50"
                                            data-tooltip="Ciclo Vital"
                                            style="width: 100%;"> </textarea>
                                        </div>`)                             
                                        
         }else{
            $('#hideOtras').html(`<div class="col s12"></dvi>`)
            $('#showOtras').html(`<div class="col s12"></dvi>`)

              
             
         }
        });
        $("#value_modal_motivoConsulta").val("")
        $("#value_modal_Caracteristicas").val("")
        $("#value_modal_CaracteristicasSocio").val("")
        $("#value_modal_ciclo").val("")
        $("#value_modal_evaluacion").val("")
        $("#value_modal_proceso").val("")


      
       }
        $('#data_historia').on('change',function(){
            let cita = $(this).val()
            var url = `/citas/atender?cita=${cita}`
            window.open(url, "_blank", 'width=600,height=800'); 
                // el return falase es para eviar que se progrague el evento y se vaya al href de tu anchor.
                return false;
            
        })
        $('#edit_data_paciente').on('click',function(){
            let pacient = $('#paciente_id').val();
            var url = `/pacientes/ver?id=${pacient}`
            window.open(url, "_blank", 'width=600,height=800'); 
                // el return falase es para eviar que se progrague el evento y se vaya al href de tu anchor.
                return false;
            
        })
        $('#back_home').click(function(){
        location.href =  `/profesionales/practicantes?sede=60049afed00d9b43a49e4da7`
        })
        $("#addTableFamilia").click(function() {
        addTableFamilia();
         });
        $("#addTableOtherRedes").click(function() {
        addTableOtherRedes();
         });
         $("#addtablecups").click(function() {
            addtablecups();
         });
         $("#enviar_data").click(function() {
        saveData();      
         });
         $("#enviar_data_sesion").click(function() {
        saveDatasesion();      
         });
        $("#close_data").click(function() {
        closeData();      
         });

         $("#addTable").click(function() {
        addFilePaciente()
        });
        $("#addTableGeo").click(function() {
        addFilePacienteGeo()
        });
        $("#remisionDate").click(function(event) {
            cupsData()
            $('.modal').modal('close');
        });

        $("#btnGuardarComment").click(function (event) {
        saveMotivoConsultaProfesional();
        $('.modal').modal('close');
        $("#value_modal_motivoConsulta").val("")
    })

            $("#btnGuardarComment_Caracteristica").click(function (event) {
                console.log(">>>>> por fin caracteristicas")
                saveCaracteristicasProfesional();
                $('.modal').modal('close');
                $("#value_modal_Caracteristicas").val("")
            })
            $("#btnGuardarComment_CaracteristicaSocio").click(function (event) {
                console.log(">>>>> por fin caracteristicas Socio")
                saveCaracteristicasSocioProfesional();
                $('.modal').modal('close');
                $("#value_modal_CaracteristicasSocio").val("")
            })
            $("#btnGuardarComment_ciclo").click(function (event) {
                console.log(">>>>> por fin caracteristicas ciclo")
                saveCicloProfesional();
                $('.modal').modal('close');
                $("#value_modal_ciclo").val("")
            })
            $("#btnGuardarComment_evaluacion").click(function (event) {
                console.log(">>>>> por fin caracteristicas evaluacion")
                saveEvaluacionProfesional();
                $('.modal').modal('close');
                $("#value_modal_evaluacion").val("")
            })
            $("#btnGuardarComment_proceso").click(function (event) {
                console.log(">>>>> por fin caracteristicas proceso")
                saveProcesoProfesional();
                $('.modal').modal('close');
                $("#value_modal_Proceso").val('')
            })
            $("#btnGuardarComment_sesion").click(function (event) {
                console.log(">>>>> por fin caracteristicas sesiones")
                saveSesion();
                $("#value_modal_sesion").val("")
                $('.modal').modal('close');
            })

             
            function closeData() {
                var mensajeCerrado 
                let motivoConsulta = $("#value_motivoConsulta").val();
                let mapa_caracteristica = $("#value_caracteristicas").val();
                let comoposicionFamiliar = $("#composicion_Familiar").val();
                let paciente_subsistema = $("#paciente_subsistema").val();
                let PacienteIdentificado = $("#PacienteIdentificado").val();
                let comprensionCaracteristicas = $("#comprension_Familiar").val();
                let cicoVital = $("#cicloVital").val();
                let otasCategorias = $("#otras").val();
                let comprensionCicloVital = $("#comprension_cicloVital").val();
                let comprensionGeneratividad = $("#comprensionPerfil").val();
                let lecturaEcopsistema1 = $("#lecturaEcosistema1").val();
                let lecturaEcopsistema2 = $("#lecturaEcosistema2").val();
                let lecturaEcopsistema3 = $("#lecturaEcosistema3").val();
                let objectivoTerapeticos = $("#objectivoTerapeuticos").val()
                let hipotesisPrimeraVez = $("#hipotesisPrimeraVez").val()
                let estrategiaConcertada = $("#EstratgiaConcentrada").val()
                let evaluacionProcesoTerapeutica = $("#evaluacionProceso").val()
                let OtrasPersonas = $("#OtasInstituciones").val()
                let aportesSupervision = $("#AporteSupervision").val()
                 
                        let countdf = 0
                    $("#table_documentFamily > tr").each(function () {
                        var row = $(this).parents(".tabrow");
                        let  name = "", rol = "", edad = "", nivelEscolaridad = "", ocupacion = "", estadoCivil = "", lugarNacimiento = "";
                        name = $("#name_" + countdf).val();
                        rol = $("#rol_" + countdf).val();
                        edad = $("#edad_" + countdf).val();
                        nivelEscolaridad = $("#nivelEscolaridad_" + countdf).val();
                        ocupacion = $("#ocupacion_" + countdf).val();
                        estadoCivil = $("#estadoCivil_" + countdf).val();
                        lugarNacimiento = $("#lugarNacimiento_" + countdf).val();
                        countdf++;
                        if(countdf>0){
                        if(name == "" || rol == "" || edad == "" || nivelEscolaridad == "" || ocupacion == "" || estadoCivil == "" || lugarNacimiento == ""){
                            Materialize.toast('Faltan Campos en familia', 6000, 'rounded red')
                            return;
                        }
                        }
                       
                    });

               
               var  datosCierre =[motivoConsulta,mapa_caracteristica,comoposicionFamiliar,paciente_subsistema,PacienteIdentificado,comprensionCaracteristicas,cicoVital,
               otasCategorias,comprensionCicloVital,comprensionGeneratividad,lecturaEcopsistema1,lecturaEcopsistema2,lecturaEcopsistema3,objectivoTerapeticos,hipotesisPrimeraVez,
               estrategiaConcertada,evaluacionProcesoTerapeutica,OtrasPersonas,aportesSupervision ]
                for( d = 0; d<= datosCierre.length; d++){
                    if(datosCierre[d] === "" ){
                        Materialize.toast('Existe un campo vacio', 6000, 'rounded red')
                        return;

                    }
                }

                
                const urlEnvio = `/api/historias-clinicas/${HC_id}`
                const method = 'PATCH'
                
                var historial = {
                    cerrado: true,

                }
                
                console.log((historial))
                $.ajax({
                        url: urlEnvio,
                        type: method,
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify(historial),
                    success: function (response) {
                        console.log(response);
                        Materialize.toast('Historia Cerrada con √©xito.', 4000, 'rounded green')
                        const id = urlParams.get('id')
                        location.href = `/citas?sede=${sede_id}`   
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        const errors = jqXHR.responseJSON.error.errors;
                        let htmlErrors = "";
                        for (const err in errors) {
                            if (errors.hasOwnProperty(err)) {
                                const error = errors[err];
                                htmlErrors += `<br>${error.message}`
                            }
                        }
                        console.log(textStatus);
                        console.log(errorThrown);
                        Materialize.toast(
                            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                            10000, 'rounded red');
                    }
                })
            
            }
           $("#close_data_sesion").click(function(e){  
            let valoracion = $('#valoracion').val()
            let dinamica = $('#dinamica').val()
            let objetivo  = $('#objetivo').val()
            let hipotesis = $('#hipotesis').val()
            let estrategia = $('#estrategia').val()
            let cierreSesion = $('#cierreSesion').val()
            let personaConvocadas = $('#personaConvocadas').val()
            let tipoDiagnostico = $('#tipoDiagnostico').val()
            if(valoracion == '' || dinamica == '' || objetivo == '' || hipotesis == ''|| estrategia == '' || cierreSesion == '' || personaConvocadas == '' || tipoDiagnostico == ''  ){
                Materialize.toast('Existe un campo vacio', 6000, 'rounded red')
                        return;
            }

                const urlEnvio = `/api/historias-clinicas/${HC_id}`
                const method = 'PATCH'
                var historial = {
                    cerrado: true,

                }
                
                console.log((historial))
                $.ajax({
                        url: urlEnvio,
                        type: method,
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify(historial),
                    success: function (response) {
                        console.log(response);
                        Materialize.toast('Historia Cerrada con √©xito.', 4000, 'rounded green')
                        location.href = `/#`   
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        const errors = jqXHR.responseJSON.error.errors;
                        let htmlErrors = "";
                        for (const err in errors) {
                            if (errors.hasOwnProperty(err)) {
                                const error = errors[err];
                                htmlErrors += `<br>${error.message}`
                            }
                        }
                        console.log(textStatus);
                        console.log(errorThrown);
                        Materialize.toast(
                            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                            10000, 'rounded red');
                    }
                })
           })

         function saveData() {
            HC_datos.addfamily
            let countdf = 0
            $("#table_documentFamily > tr").each(function () {
                var row = $(this).parents(".tabrow");
                let  name = "", rol = "", edad = "", nivelEscolaridad = "", ocupacion = "", estadoCivil = "", lugarNacimiento = "";
                name = $("#name_" + countdf).val();
                rol = $("#rol_" + countdf).val();
                edad = $("#edad_" + countdf).val();
                nivelEscolaridad = $("#nivelEscolaridad_" + countdf).val();
                ocupacion = $("#ocupacion_" + countdf).val();
                estadoCivil = $("#estadoCivil_" + countdf).val();
                lugarNacimiento = $("#lugarNacimiento_" + countdf).val();
                countdf++;
                HC_datos.addfamily.push({ name, rol, edad, nivelEscolaridad, ocupacion, estadoCivil, lugarNacimiento });
            });  
            HC_datos.addregistro 
            let countdp1 = 0
             console.log("antes de entrar a la busqueda", HC_datos.addregistro )
        $('#table_documentPacient2 > tr').each(function () {
         
            var row = $(this).parents(".tabrow");
            let tipoInstitucion = "", nombreInstitucion = "", tiempoVinculacion = "", otrosDatos = "";
                tipoInstitucion = $("#tipoInstitucion_" + countdp1).val();
                nombreInstitucion = $("#nombreInstitucion_" + countdp1).val();
                tiempoVinculacion = $("#tiempoVinculacion_" + countdp1).val();
                otrosDatos = $("#otrosDatos_" + countdp1).val();
              
                countdp1++;
                HC_datos.addregistro.push({tipoInstitucion, nombreInstitucion, tiempoVinculacion, otrosDatos})
        });   
        console.log("Despues de la busqueda", HC_datos.addregistro )                               
        const motivoConsulta = $("#value_motivoConsulta").val();
        const rutaDocumentPrimeraVez = ''
        const urlDocumento = ''
        const mapa_caracteristica = $("#value_caracteristicas").val();
        const comoposicionFamiliar = $("#composicion_Familiar").val();
        const paciente_subsistema = $("#paciente_subsistema").val();
        const PacienteIdentificado = $("#PacienteIdentificado").val();
        const comprensionCaracteristicas = $("#comprension_Familiar").val();
        const cicoVital = $("#cicloVital").val();
        const otasCategorias = $("#otras").val();
        const comprensionCicloVital = $("#comprension_cicloVital").val();
        const comprensionGeneratividad = $("#comprensionPerfil").val();
        const lecturaEcopsistema1 = $("#lecturaEcosistema1").val();
        const lecturaEcopsistema2 = $("#lecturaEcosistema2").val();
        const lecturaEcopsistema3 = $("#lecturaEcosistema3").val();
        const objectivoTerapeticos = $("#objectivoTerapeuticos").val()
        const hipotesisPrimeraVez = $("#hipotesisPrimeraVez").val()
        const estrategiaConcertada = $("#EstratgiaConcentrada").val()
        const evaluacionProcesoTerapeutica = $("#evaluacionProceso").val()
        const OtrasPersonas = $("#OtasInstituciones").val()
        const aportesSupervision = $("#AporteSupervision").val()
        const FinalidadConsulta = $("#Finalidad").val()
        const causaExterna = $("#causaExterma").val()
        const Diagnostico = $('#tipoDiagnostico').val()
        const DiagnosticoPP = $('#diagnosticoPrincipalPV').val()
        const DiagnosticoPS = $('#diagnosticoSecundarioPV').val()
        const smallchild = $("input:checked[name='smallchild']").attr("value");
        const escasexFuentes = $("input:checked[name='escasexFuentes']").attr("value");
        const confusion = $("input:checked[name='confusion']").attr("value");
        const vinculoParentezco = $("input:checked[name='vinculoParentezco']").attr("value");
        const vinculoConyugue = $("input:checked[name='vinculoConyugue']").attr("value");
        const vinculoEconomicos = $("input:checked[name='vinculoEconomicos']").attr("value");
        const exclusionComunidad= $("input:checked[name='exclusionComunidad']").attr("value");
        const circunstanciaSocial = $("input:checked[name='circunstanciaSocial']").attr("value");
        const circunstanciaPolitica = $("input:checked[name='circunstanciaPolitica']").attr("value");
        const escasaSuficiente = $("input:checked[name='escasaSuficiente']").attr("value");
        const existenHistoria = $("input:checked[name='existenHistoria']").attr("value");
        const sobrecarga = $("input:checked[name='sobrecarga']").attr("value");
        const altaBajaEventos = $("input:checked[name='altaBajaEventos']").attr("value");
        const presenciaAusencia = $("input:checked[name='presenciaAusencia']").attr("value");
        const conflictoArmonia = $("input:checked[name='conflictoArmonia']").attr("value");
        const conflictoPadreHijo = $("input:checked[name='conflictoPadreHijo']").attr("value");
        const conflictoMadreHijo = $("input:checked[name='conflictoMadreHijo']").attr("value");
        const conflictoHermanos = $("input:checked[name='conflictoHermanos']").attr("value");
        const conflictoExtensa = $("input:checked[name='conflictoExtensa']").attr("value");
        const addFile = []
        const addfamily = HC_datos.addfamily
        const addregistro = HC_datos.addregistro
        console.log(addregistro)
         

                  


        const body = {
            motivoConsulta,
            rutaDocumentPrimeraVez,
            urlDocumento,
            mapa_caracteristica,
            comoposicionFamiliar,
            PacienteIdentificado,
            paciente_subsistema,
            comprensionCaracteristicas,
            hipotesisPrimeraVez,
            cicoVital,
            otasCategorias,
            comprensionCicloVital,
            comprensionGeneratividad,
            lecturaEcopsistema1,
            lecturaEcopsistema2,
            lecturaEcopsistema3,
            objectivoTerapeticos,
            estrategiaConcertada,
            evaluacionProcesoTerapeutica,
            OtrasPersonas,
            aportesSupervision,
            FinalidadConsulta,
            causaExterna,
            Diagnostico,
            smallchild,
            escasexFuentes,
            confusion,
            vinculoParentezco,
            vinculoConyugue,
            vinculoEconomicos,
            exclusionComunidad,
            circunstanciaSocial,
            circunstanciaPolitica,
            escasaSuficiente,
            existenHistoria,
            sobrecarga,
            altaBajaEventos,
            presenciaAusencia,
            conflictoArmonia,
            conflictoPadreHijo,
            conflictoMadreHijo,
            conflictoHermanos,
            conflictoExtensa,
            addfamily,
            addregistro,
            addFile,
            DiagnosticoPP,
            DiagnosticoPS
            
        }
        

        const urlEnvio = `/api/historias-clinicas/${HC_id}`
        const method = 'PATCH'
        const formulario = body
        var historial = {
            datos_formulario: body,
            cerrado: false,
            closePrimeraVez: false
        }
        
        $.ajax({
                url: urlEnvio,
                type: method,
                data: historial,
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(historial),
            success: function (response) {


    
               
                event.preventDefault();
                Materialize.toast('Historia Guardada con √©xito.', 4000, 'rounded green')
                 setTimeout(function () {
                    location.reload();
                }, 2000);

 
                
            },
            error: function (jqXHR, textStatus, errorThrown) {
                const errors = jqXHR.responseJSON.error.errors;
                let htmlErrors = "";
                for (const err in errors) {
                    if (errors.hasOwnProperty(err)) {
                        const error = errors[err];
                        htmlErrors += `<br>${error.message}`
                    }
                }
                console.log(textStatus);
                console.log(errorThrown);
                Materialize.toast(
                    `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                    10000, 'rounded red');
            }
            
        })
    }

   


        $('.historia-clinica-input').each(function () {
            const campo_id = $(this).attr('id');
            if ($(this).attr('tipo') == 'firma') {
                console.log('Econtre un tipo Firma', $(this).attr('id'));
                if (HC_datos[campo_id] != undefined && String(HC_datos[campo_id]).length != 0) {
                    console.log(typeof HC_datos[campo_id], HC_datos[campo_id].length, campo_id,
                        HC_datos[campo_id] == null)
                    eval(`signaturePad${campo_id}`).fromData(HC_datos[campo_id])
                }
            } else if ($(this).attr('tipo') == 'archivo') {
                console.log('Econtre un FIle', $(this).attr('id'));
                if (HC_cerrado) {
                    //document.getElementById(campo_id).href = HC_datos[campo_id]['data']['location']
                }
            } else if ($(this).attr('type') != 'file') {
                console.log('Econtre un no FIle', $(this).attr('id'), $(this).attr('type'));
                $(this).val(HC_datos[campo_id])
            }
        })

        $('#Firma_consInformado_children').change(function() {
            const value = $(this).is(':checked');
            console.log(">>>> children ", value)
            if(value){
                const cita_id = new URLSearchParams(window.location.search).get('cita');
                const urlEnvio = `/api/citas/${cita_id}`
                const methodEnvio = 'PATCH'
                editarCita = {
                    consentimientoChildren: 1
                }
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(editarCita),
                    success: function () {
                        Materialize.toast('Consentimiento de Firma Enviado.', 4000, 'rounded green')
                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
            }else {
                const cita_id = new URLSearchParams(window.location.search).get('cita');
                const urlEnvio = `/api/citas/${cita_id}`
                const methodEnvio = 'PATCH'
                editarCita = {
                    consentimientoChildren: 0
                }
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(editarCita),
                    success: function () {
                        Materialize.toast('Cancelado Consentimiento de Firma Enviado.', 4000, 'rounded green')
                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
            }
        });
        $('#Firma_consInformado_adulto').change(function() {
            const value = $(this).is(':checked');
            if(value){
                const cita_id = new URLSearchParams(window.location.search).get('cita');
                const urlEnvio = `/api/citas/${cita_id}`
                const methodEnvio = 'PATCH'
                editarCita = {
                    consentimientoAdulto: 1
                }
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(editarCita),
                    success: function () {
                        Materialize.toast('Consentimiento de Firma Enviado.', 4000, 'rounded green')
                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
            }else {
                const cita_id = new URLSearchParams(window.location.search).get('cita');
                const urlEnvio = `/api/citas/${cita_id}`
                const methodEnvio = 'PATCH'
                editarCita = {
                    consentimientoAdulto: 0
                }
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(editarCita),
                    success: function () {
                        Materialize.toast('Cancelado Consentimiento de Firma Enviado', 4000, 'rounded green')
                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
            }
        });

        function addFilePacienteGeo() {
        console.log(">>>> Dato agregado")
        const tr = $("#table_documentPacientGeo tr").length;
        $("#table_documentPacientGeo").append(`
                              <tr class='tabrow closed'>
                                  <td>
                                    <input type="file" class="campo_imagen1" id="filedocumentGeo_${tr}"
                                            accept="image/*, application/pdf">
                                  </td>
                                  <td>
                                    <a id="saveDataGeo_${tr}" class="saveRowGeo waves-effect btn-flat col m12 m12 s12 btn waves-effect red waves-light">
                                      <i class="material-icons">cloud_upload</i>
                                      <span style="position: relative; bottom: 4px;"> Cargar </span>
                                    </a>
                                  </td>
                                    <td>
                                        <a id="addProfesional_${tr}" class="DeleteButtonFilePacienteGeo waves-effectwaves-effect primary waves-light">
                                            <i class="material-icons">delete</i>
                                            <span style="position: relative; bottom: 4px;">Delete</span>
                                        </a>
                                    </td>
                              </tr>`) 
         }
        $("body").on("click",".DeleteButtonFilePacienteGeo", function(ev){
                $(this).closest("tr").remove();
            })  


    })
    $(document).ready(function () {
        $('.modal').modal();
            var usuario = <%-JSON.stringify(user)%>;
            console.log(usuario)
            $("#Open_modal_remision").click(function(){
                ("#modal_remision").openModal;
            })
            
        
            let contador=0
            $('#comentMotConsulta').click(function () {
                contador++
                if(contador>=2){
                $("#content_timeline").empty()
            }
            
                ("#modal_consulta").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "motivoConsulta"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                    
                        if (comentarioProfe){
                        $("#content_timeline").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })

            
            })
            let contadorCaracteristicas=0
            $("#comentCaracteristicas").click(function () {
                contadorCaracteristicas++
                if(contadorCaracteristicas>=2){
                $("#content_timeline_caracteristicas").empty()
            }
            
                ("#modal_caracteristica").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "caracteristicas"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                    
                        
                        if (comentarioProfe){
                        $("#content_timeline_caracteristicas").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_caracteristicas").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })

            let contadorCaracteristicasSocio=0
            $("#comentCaracteristicasSocio").click(function () {
                contadorCaracteristicasSocio++
                if(contadorCaracteristicasSocio>=2){
                $("#content_timeline_caracteristicasSocio").empty()
            }
            
                ("#modal_caracteristicaSocio").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "caracteristicasSocio"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                        
                        
                        if (comentarioProfe){
                        $("#content_timeline_caracteristicasSocio").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_caracteristicasSocio").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })
            let contadorCiclo=0
            $("#comentCiclo").click(function () {
                contadorCiclo++
                if(contadorCiclo>=2){
                $("#content_timeline_ciclo").empty()
            }
            
                ("#modal_ciclo").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "ciclo"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                        
                        
                        if (comentarioProfe){
                        $("#content_timeline_ciclo").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_ciclo").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })
            let contadorEvaluacion=0
            $("#comentEvaluacion").click(function () {
                contadorEvaluacion++
                if(contadorEvaluacion>=2){
                $("#content_timeline_evaluacion").empty()
            }
            
                ("#modal_evaluacion").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "evaluacion"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                        var maxLength = 168;
                        var strLength = comentarioProfe.length;
                        
                        if( strLength > maxLength){
                            Materialize.toast('Espere un momento algun comentario esta cargando esto debido a que tiene mas de 168 caracteres ', 6000, 'rounded green')
                            $(`#coment_${i}`).innerHTML = '<span style="color: red;">'+strLength+' out of '+maxLength+' characters</span>';
                        }
                        
                        
                        if (comentarioProfe){
                        $("#content_timeline_evaluacion").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div id="coment_${i}"><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly data-length="5000">${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_evaluacion").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly data-length="5000">${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })
            let contadorProceso=0
            $("#comentProceso").click(function () {
                contadorProceso++
                if(contadorProceso>=2){
                $("#content_timeline_proceso").empty()
            }
            
                ("#modal_proceso").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "proceso"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                        
                        
                        if (comentarioProfe){
                        $("#content_timeline_proceso").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_proceso").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })
            let contadorSesiones=0
            $("#comentSesion").click(function () {
                contadorSesiones++
                if(contadorSesiones>=2){
                $("#content_timeline_sesion").empty()
            }
            ("#modal_sesion").openModal;
                const cita = <%-JSON.stringify(Cita)%>;
                var usuario = <%-JSON.stringify(user)%>;
                var tipoUsuario = usuario.tipo
                
                let sede = cita.Sede._id
                let Paciente = [cita.Paciente[0]._id]
                let Cita = [cita._id]
                let Profesional = [cita.Profesional._id]
                let headComment = "sesion"
                
            
                $.ajax({
                method: 'GET',
                url: `/api/citas/insertCommentGet/${sede}/${Cita}/${Paciente}/${headComment}`,
                success: function (r) {
                    console.log(">>>> Aqui tiene tu cometario ", r)
                    if(r ==''){
                        Materialize.toast('No tienes comentarios  :( <br> <- Puedes crear el primero aqui en la caja de texto', 4000, 'rounded red')
                    }
                    let comentario
                    for(i=0;i<r.length;i++){
                    datosComentario = r[i]
                        comentario = datosComentario.comentario
                        comentarioProfe = datosComentario.comentarioProfe
                        var name = datosComentario.name
                        var options = {weekday: "long", year: "numeric", month: "long", day: "numeric", hour: "numeric", hour12:"false", minute: "numeric"};
                        var fecha = new Date(datosComentario.fechaSystem)
                        fecha =  fecha.toLocaleString ("es-ES", options) 
                    
                        
                        if (comentarioProfe){
                        $("#content_timeline_sesion").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <!-- Item 2 -->
                    <li>
                        <div class="direction-l">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentarioProfe}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentarioProfe}</textarea>.</div>
                        </div>
                    </li>
                    </ul>
                `);  
                } else if(comentario){
                    $("#content_timeline_sesion").append(`
                <ul class="timeline">
                    <!-- Item 1 -->
                    <li>
                        <div class="direction-r">
                        <div class="flag-wrapper">
                            <span class="hexa"></span>
                            <span class="flag">${name}</span>
                            <span class="time-wrapper"><span class="time">${fecha}</span></span>
                        </div>
                        <div class=""><textarea value="${comentario}" class="materialize-textarea clean_on_create tooltipped" readonly >${comentario}</textarea>.</div>
                        </div>
                    </li>
                
                    </ul>
                `);  
                        }
                }
                
                }
                    
                    
        
                
            })
        
            })
        });       
    function addTableFamilia(){
    const tr = $("#table_documentFamily tr").length;
    $("#table_documentFamily").append(`
                            <tr class='tabrow closed'>
                                <td>
                                    <input type="text" id="name_${tr}" name="trip-start">
                                </td> 
                                <td>
                                    <select id="rol_${tr}" class="validate select browse-select">
                                        <option value="" disabled    >Elige una opci√≥n</option>
                                        <option value="Madre">Madre</option>
                                        <option value="Padre">Padre</option>
                                        <option value="tio">tio</option>
                                        <option value="tia">tia</option>
                                        <option value="abuelo">abuelo</option>
                                        <option value="abuela">abuela</option>
                                        <option value="primo">primo</option>
                                        <option value="prima">prima</option>
                                    </select>
                                    <label for="rol_${tr}" class="">Rol Familiar</label>
                                </td>
                                <td>
                                    <input type="number" id="edad_${tr}" name="trip-start">
                                </td>
                                <td>
                                    <select id="nivelEscolaridad_${tr}" class="validate select browse-select">
                                        <option value="" disabled >Elige una opci√≥n</option>
                                        <option value="MNE.: menor no escolar.">MNE.: menor no escolar.</option>
                                        <option value="AN.: analfabeta.">AN.: analfabeta.</option>
                                        <option value="PREESC: pr√©-escolar">PREESC: pr√©-escolar. </option>
                                        <option value="PR.: prim√°rios.">PR.: prim√°rios. </option>
                                        <option value="SEC IN.: secundaria incompleta.">SEC IN.: secundaria incompleta. </option>
                                        <option value="SEC COM.: secundaria completa.">SEC COM.: secundaria completa. </option>
                                        <option value="UNI. IN.: universit√°rios interm√©dios o incompletos.">UNI. IN.: universit√°rios interm√©dios o incompletos.</option>
                                        <option value="UNI COM.: universitarios completos."> UNI COM.: universitarios completos.</option>
                                    </select>
                                    <label for="nivelEscolaridad_${tr}" class="">Nivel Escolaridad</label>
                                </td>
                                <td>
                                    <select id="ocupacion_${tr}" class="validate select browse-select">
                                        <option value="" disabled >Elige una opci√≥n</option>
                                        <option value="Hogar.">HOGAR.</option>
                                        <option value="mpleado estable.">EMP.EST.: empleado estable. </option>
                                        <option value="EMP.INES.: empleado inestable">EMP.INES.: empleado inestable (sin contrato).</option>
                                        <option value="TRA. IND.: trabajador independiente"> TRA. IND.: trabajador independiente. </option>
                                        <option value="ESTUD.: estudiante.">ESTUD.: estudiante.</option>
                                        <option value="JUB.: jubilado o retirado."> JUB.: jubilado o retirado.</option>
                                    </select>
                                    <label for="ocupacion_${tr}">Periodo</label>
                                </td>
                                <td>
                                    <select id="estadoCivil_${tr}" class="validate select browse-select">
                                        <option value="" disabled >Elige una opci√≥n</option>
                                        <option value="Soltero">Soltero</option>
                                        <option value="Casado"> Casado</option>
                                        <option value="Viudo"> Viudo</option>
                                        <option value="Separado"> SEP.: Separado. </option>
                                        <option value="Union Libre"> UL.: Uni√≥n libre. </option>
                                        <option value="Madre Soltera"> MS.: Madre soltera. </option>
                                    </select>
                                    <label for="estadoCivil_${tr}">Frecuencia</label>
                                </td>
                                <td>
                                    <input type="text" id="lugarNacimiento_${tr}" name="trip-start">
                                </td>
                                <td>
                                    <a id="addProfesional_${tr}" class="DeleteButtonFammily waves-effectwaves-effect primary waves-light">
                                        <i class="material-icons">delete</i>
                                        <span style="position: relative; bottom: 4px;">Delete</span>
                                    </a>
                                </td>
                              </tr>`)
                    $(`#estadoCivil_${tr}`).material_select();
                    $(`#nivelEscolaridad_${tr}`).material_select();
                    $(`#ocupacion_${tr}`).material_select();
                    $(`#rol_${tr}`).material_select();
                    
                }

    
                $("body").on("click",".DeleteButtonFammily", function(ev){
                    $(this).closest("tr").remove();
                })
            
        function addTableOtherRedes() {
            
            const tr = $("#table_documentPacient2 tr").length;
            $("#table_documentPacient2").append(`
                <tr>
                    <td>  <input type="text" id="tipoInstitucion_${tr}"  />  </td>
                    <td>  <input type="text" id="nombreInstitucion_${tr}" />  </td>
                    <td>  <input type="text" id="tiempoVinculacion_${tr}" />  </td>
                    <td>  <input type="text" id="otrosDatos_${tr}" />  </td>
                    <td>
                        <a id="addProfesional_${tr}" class="DeleteButtonOthers waves-effectwaves-effect primary waves-red">
                            <i class="material-icons">delete</i>
                            <span style="position: relative; bottom: 4px;"></span>
                        </a>
                    </td>
                </tr>
                    `)
            $(`#tipoInstitucion_${tr}`).val();
            $(`#nombreInstitucion_${tr}`).val();
            $(`#tiempoVinculacion_${tr}`).val();
            $(`#otrosDatos_${tr}`).val();

        }
        function addtablecups() {
            
            const tr = $("#table_cups tr").length;
            $("#table_cups").append(`
                <tr>
                    <td>                                     
                        <input id="cups_${tr}" type="text">
                        <label for="cups">CUPS: <span style="color:red">*</span></label></td>
                    <td>
                        <a id="" class="DeleteButtonOthersCups waves-effectwaves-effect primary waves-red">
                            <i class="material-icons">delete</i>
                            <span style="position: relative; bottom: 4px;"></span>
                        </a>
                    </td>
                </tr>
                    `)
            
                    autocompleteCUPS(`#cups_${tr}`)
        }
        $("body").on("click",".DeleteButtonOthersCups", function(ev){
        $(this).closest("tr").remove();
        })
        $("body").on("click",".DeleteButtonOthers", function(ev){
        $(this).closest("tr").remove();
        })
        function addFilePaciente() {
        console.log(">>>> Dato agregado")
        const tr = $("#table_documentPacient tr").length;
        $("#table_documentPacient").append(`
                              <tr class='tabrow closed'>
                                  <td>
                                    <select id="tipDocumentAdd_${tr}" class="validate select browse-select">
                                        <option value="" disabled >Elige una opci√≥n</option>
                                        <option value="Fotocopia de c√©dula (de los integrantes)">Fotocopia de c√©dula (de los integrantes)</option>
                                        <option value="CONSENTIMIENTO Y/O ASENTIMIENTO">CONSENTIMIENTO Y/O ASENTIMIENTO</option>
                                        <option value="RECIBO DE PAGO">RECIBO DE PAGO</option>
                                        <option value="HISTORIA CLINICA EXTERNA">HISTORIA CLINICA EXTERNA</option>
                                        <option value="REGISTRO CIVIL Y TARJETA PARA MENORES DE EDAD">REGISTRO CIVIL Y TARJETA PARA MENORES DE EDAD</option>
                                        <option value="DOCUMENTO DE CUSTODIA O DECLARACI√ìN EXTRAJUICIO">DOCUMENTO DE CUSTODIA O DECLARACI√ìN EXTRAJUICIO.</option>
                                        <option value="DOCUMENTO INCRUSTADO">DOCUMENTO INCRUSTADO (ESTABLECER LOS DOCUMENTOS A CARGAR DE MANERA COMPILADA EN UN SOLO ARCHIVO)¬†</option>
                                    </select>
                                    <label for='tipDocumentAdd_${tr}'>tipo documento</label>
                                  </td> 
                                  <td>
                                    <input class="note" id="descripcionAdd_${tr}" type="text" class="validate">
                                    <label for="descripcionAdd_${tr}"></label>
                                  </td>
                                  <td>
                                    <input type="file" class="campo_imagen1" id="filedocument_${tr}"
                                            accept="image/*, application/pdf">
                                  </td>
                                  <td>
                                    <a id="saveData_${tr}" class="saveRow waves-effect btn-flat col m12 m12 s12 btn waves-effect red waves-light">
                                      <i class="material-icons">cloud_upload</i>
                                      <span style="position: relative; bottom: 4px;"> Cargar </span>
                                    </a>
                                  </td>
                                    <td>
                                        <a id="addProfesional_${tr}" class="DeleteButtonFilePaciente waves-effectwaves-effect primary waves-light">
                                            <i class="material-icons">delete</i>
                                            <span style="position: relative; bottom: 4px;">Delete</span>
                                        </a>
                                    </td>
                              </tr>`)
        $(`#tipDocumentAdd_${tr}`).material_select();
}
$("body").on("click",".DeleteButtonFilePaciente", function(ev){
        $(this).closest("tr").remove();
    })
    function tipoFirmaConsentimiento(){
        var firma = <%-JSON.stringify(Cita.firma) || "" %>;
        var id = <%-JSON.stringify(Cita._id) || 0 %>;
        var canvas = document.getElementById(id);
        var signaturePad = new SignaturePad(canvas, {
            backgroundColor: 'rgb(215, 215, 215)'
        });
        if(firma !== ''){
            eval(`signaturePad`).fromData(firma)
        }
    }

    function autocompleteCie10(input) {
        $(input).autocomplete({
            minLength: 3,
            limit: 20,
            data: <%-JSON.stringify(cie10auto)%>
        })
    }
    

    function autocompleteSelectores() {
        $('.autocompleteinput').each(function () {
            const dataAuto = $(this).attr('data-autocomplete')
            var valor = dataAuto.split(', ').join(',').split(',')
            var valores = Object({});
            for (let i = 0; i < valor.length; i++) {
                const valorTXT = valor[i];
                valores[(valorTXT)] = null
            }
            $(this).autocomplete({
                minLength: 1,
                limit: 20,
                data: valores
            })
        })
    }

    function validarTamanio() {
        $('.campo_imagen').bind('change', function () {
            if (this.files[0].size / 1024 / 1024 > 1) {
                alert('La imagen es demaisado grande. (Tama√±o M√°ximo: 1 MB)');
                this.value = "";
            } else {
                Materialize.toast('Subiendo Imagen.', 4000, 'rounded blue')
                console.log('Imagen Aceptada');
                const campo_id = $(this).attr('id');
                const sede_id = $('#sede_id').val();
                const tipo = 'historia-clinica'
                const tipo_id = $('#hc_id').val();
                var archivo = document.getElementById(campo_id).files[0]
                var formData = new FormData();
                formData.append('archivo', document.getElementById(campo_id).files[0]);
                const urlEnvio =
                    `/api/archivos?sede=${sede_id}&tipo=${tipo}&tipo_id=${tipo_id}&campo_id=${campo_id}`
                $.ajax({
                    url: urlEnvio,
                    type: 'POST',
                    data: formData,
                    processData: false, // tell jQuery not to process the data
                    contentType: false, // tell jQuery not to set contentType
                    enctype: 'multipart/form-data',
                    success: function (data) {
                        Materialize.toast('Imagen subida con √©xito.', 4000, 'rounded green')
                        console.log(data);
                        HC_datos[campo_id] = data
                    },
                    error: function (a, b, c) {
                        Materialize.toast('Hubo un error al subir el archivo.', 4000,
                            'rounded blue')
                        console.error(a, b, c)
                    }
                });
            };
        });

        function enviarHistoria(cerradoValue) {
            console.log("Si entra")
            const urlEnvio = `/api/historias-clinicas/${HC_id}`
            $('.historia-clinica-input').each(function () {
                const campo_id = $(this).attr('id');
                if ($(this).attr('tipo') == 'firma') {
                    console.log('Firma', `signaturePad${campo_id}`, eval(`signaturePad${campo_id}`).toData());
                    HC_datos[campo_id] = eval(`signaturePad${campo_id}`).toData()
                } else if ($(this).attr('type') != 'file') {
                    HC_datos[campo_id] = $(this).val();
                    $(this).val(HC_datos[campo_id])
                }
            })
           var FinalidadComercial = $('#FinalidadComercial').val() || ""
           var causaExtermaComercial = $('#causaExtermaComercial').val() || ""
           var tipoDiagnosticoComercial = $('#tipoDiagnosticoComercial').val() || ""
           var diagnosticoPrincipalComercial = $('#diagnosticoPrincipalComercial').val() || ""
           var diagnosticoSecundarioComercial = $('#diagnosticoSecundarioComercial').val() || ""
           var body = [
                FinalidadComercial,
                causaExtermaComercial,
                tipoDiagnosticoComercial,
                diagnosticoPrincipalComercial,
                diagnosticoSecundarioComercial
            ]
            const dataEnviar = {
                datos_formulario: HC_datos,
                datos_selectores: body,
                cerrado: cerradoValue
            }
            $.ajax({
                url: urlEnvio,
                type: 'PATCH',
                data: dataEnviar,
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(dataEnviar),
                success: function (data) {
                    Materialize.toast('Historia Guardada con √©xito.', 4000, 'rounded green')
                    console.log(data);
                    if (cerradoValue) {
                        const editarCita = {
                            estado: 'Atendida',
                            color: '#0bb305'
                        }
                        const urlEnvio = `/api/citas/${cita_id}`
                        const methodEnvio = 'PATCH'
                        $.ajax({
                            url: urlEnvio,
                            method: methodEnvio,
                            dataType: 'json',
                            contentType: 'application/json',
                            data: JSON.stringify(editarCita),
                            success: function () {
                                Materialize.toast(
                                    'Cita Atendida con √©xito.<br>Ser√°s redirigido a Dashboard.',
                                    4000, 'rounded green')
                                $('#modal_editar_cita').modal('close');
                                setTimeout(function () {
                                    location.href = "/"
                                }, 2000)
                            },
                            error: function (a, b, c) {
                                console.log(a, b, c);
                                Materialize.toast(
                                    'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                                    4000, 'rounded red');
                            }
                        })
                    }
                },
                error: function (a, b, c) {
                    Materialize.toast('Hubo un error al Guardar el la Historia Cl√≠nica.', 4000,
                        'rounded blue')
                    console.error(a, b, c)
                }
            });
        }
        $('.campo_archivo').bind('change', function () {
            if (this.files[0].size / 1024 / 1024 > 5) {
                alert('La imagen es demaisado grande. (Tama√±o M√°ximo: 5 MB)');
                this.value = "";
            } else {
                Materialize.toast('Subiendo Archivo.', 4000, 'rounded blue')
                console.log('Imagen Aceptada');
                const campo_id = $(this).attr('id');
                const sede_id = $('#sede_id').val();
                const tipo = 'historia-clinica'
                const tipo_id = $('#hc_id').val();
                var archivo = document.getElementById(campo_id).files[0]
                var formData = new FormData();
                formData.append('archivo', document.getElementById(campo_id).files[0]);
                const urlEnvio =
                    `/api/archivos?sede=${sede_id}&tipo=${tipo}&tipo_id=${tipo_id}&campo_id=${campo_id}`
                $.ajax({
                    url: urlEnvio,
                    type: 'POST',
                    data: formData,
                    processData: false, // tell jQuery not to process the data
                    contentType: false, // tell jQuery not to set contentType
                    enctype: 'multipart/form-data',
                    success: function (data) {
                        Materialize.toast('Archivo subido con √©xito.', 4000, 'rounded green')
                        console.log(data);
                        HC_datos[campo_id] = data
                    },
                    error: function (a, b, c) {
                        Materialize.toast('Hubo un error al subir el archivo.', 4000,
                            'rounded blue')
                        console.error(a, b, c)
                    }
                });
            };
        });
        $('#guardar_historia').click(function () {
            enviarHistoria(false);
        })
        $('#cerrar_historia').click(function () {
            console.log("Si entra")
            enviarHistoria(true);
        })
        $("body").on("click",".saveRowGeo", function(ev){
        var formData = new FormData();
        var tr = $('table').closest('tr');
        var fup = $('tr').find("input[type='file']");
        var totalFiles = fup.length;    
        let sede = sede_id;
        const Paciente = <%- JSON.stringify(paciente._id) %>;
        var cita_id = $('#cita_id').val();
        let tipoDocumento = "GeoGrama", descripcionDocumento = "GeoGrama";
        var HC_id = $('#hc_id').val();
        for (var i = 0; i < totalFiles; i++) {
            var file = fup[i].files[0];//Exception will not occur here
            if(file == undefined){
              alert('Debe selecionar un archivo para cargar');
              return;
            }else if(fup[i].files[0].size / 1024 / 1024 > 5){              
              alert('La imagen es demaisado grande. (Tama√±o M√°ximo: 5 MB)');
              return;
            }
            const campo_id = 'genograma';
            const tipo = 'historia-clinica';
            
            formData.append("archivo", file); 
            const urlEnvio = `/api/archivos?sede=${sede}&tipo=${tipo}&tipo_id=${cita_id}&campo_id=${campo_id}`   
            var row = $(this).parents(".tabrow");
            Materialize.toast('Subiendo Imagen.', 2000, 'rounded blue')
            console.log('Imagen Aceptada');
            $.ajax({
                    url: urlEnvio,
                    type: 'POST',
                    data: formData,
                    processData: false, // tell jQuery not to process the data
                    contentType: false, // tell jQuery not to set contentType
                    enctype: 'multipart/form-data',
                    success: function (data) {
                        Materialize.toast('Imagen subida con √©xito.', 2000, 'rounded green')
                        /** TODO Probrar el guardado junto con el de paciente 
                         en la tabla nueva CargueDocumentoSchema 
                        */
                      const urlDocumento = data.data.location
                      console.log(">>>> urlDocumento: ", urlDocumento)
                      const body = {
                        sede,
                        cita_id,
                        Paciente,
                        tipoDocumento,
                        descripcionDocumento,
                        urlDocumento
                      
                      }

                        $.ajax({
                          method: "POST",
                          url: '/api/carguedocumento/create',
                          data: body,
                          success: function (response) {
                              console.log(response);
                              $('.imprirdoc').append(`
                                <h1> ${response.tipoDocumento}</h1>
                              `);
                              Materialize.toast('Archivo(s) cargados.', 3000, 'rounded green')
                          },
                        })
                    },
                    error: function (a, b, c) {
                        Materialize.toast('Hubo un error al subir el archivo.', 4000,
                            'rounded blue')
                        console.error(a, b, c)
                    }
            });
        }
         console.log(">>>>>>> Funciona") 
      });

    }



/* Desde aqui empienza sessiones */

var datos_sesion = <%-JSON.stringify(HistoriaClinica.datos_sesion) || "{}" %>;



var sede_id = $('#sede_id').val();
  var HC_id = $('#hc_id').val();

    $(document).on("click", ".select-wrapper", function (event) {
        event.stopPropagation();
    });

    $(document).ready(function () {
    autocompleteCie10('input.autocomplete-cie10');
     $("#enviar_data").click(function() {
        saveData();
        
    })

      
    

      $("#goBack").click(function () {
        goback();
      })
    })
    function autocompleteCie10(input) {
        $(input).autocomplete({
            minLength: 3,
            limit: 20,
            data: <%-JSON.stringify(cie10auto)%>
        })
    }
    function autocompleteCUPS(input) {
        $(input).autocomplete({
            minLength: 2,
            limit: 20,
            data: cupsauto
        })
    }
    
    function goback(){
      location.href = `/citas?sede=${sede_id}`
    }
        /* Traemos todos Los datos*/
        
        var datosSession = <%-JSON.stringify(HistoriaClinica.datos_sesion) || "{}"%>;
        var PracticanteEscogido = datosSession.practicante
        var SupervisorEscogido = datosSession.supervisorN
        $.ajax({
          method: 'GET',
          url: `/api/profesionales?sede=${sede_id}&projection=nombre+apellido+username+email+-Sedes+roles+usuario+-SedeUserInfos+-Encargados`,
          success: function (r) {
              for (let i = 0; i < r.length; i++) {
                  const profesionales = r[i];
                  switch (profesionales.roles){
                    case 'PG': 
                    $('#practicante').append(
                    `<option value="${profesionales._id}" ${profesionales._id == `${PracticanteEscogido}` ? 'selected': '' }>${profesionales.nombre} ${profesionales.apellido}</option>`)
                    break;
                    case 'SP':  
                    $('#supervisorN').append(
                    `<option value="${profesionales._id}" ${profesionales._id == `${SupervisorEscogido}` ? 'selected': '' }>${profesionales.nombre} ${profesionales.apellido}</option>`)
                    break;

                  }
                  
              }
              $('#practicante').material_select();
              $('#supervisorN').material_select();
          }
      })
    
    function saveDatasesion() {
     const sessionCoterapeuta = $('#sessionCoterapeuta').val()   
     const dataCoterapeuta = $('#dataCoterapeuta').val()
     const dataSupervisor = $('#dataSupervisor').val()   
     const sessionSupervisor = $('#sessionSupervisor').val()
     const asistio = $('#asistio').val()   
     const justificacion = $('#justificacion').val()   
     const valoracion = $('#valoracion').val()
     const dinamica = $('#dinamica').val()
     const objetivo  = $('#objetivo').val()
     const hipotesis = $('#hipotesis').val()
     const estrategia = $('#estrategia').val()
     const cierreSesion = $('#cierreSesion').val()
     const personaConvocadas = $('#personaConvocadas').val()
     const tipoDiagnostico = $('#tipoDiagnostico').val()
     const opcionEscogida = $('#opcion').val()
     const practicante = $('#practicante').val()
     const supervisorN = $('#supervisorN').val()
     const diagnosticoPrincipalSession = $('#diagnosticoPrincipalSession').val()
     const diagnosticoSecundarioSession = $('#diagnosticoSecundarioSession').val()
    
    
    const body = {
        sessionCoterapeuta,
        dataCoterapeuta,
        dataSupervisor,
        sessionSupervisor,
        asistio,
        justificacion,
        valoracion,
        dinamica,
        objetivo,
        hipotesis,
        estrategia,
        cierreSesion,
        personaConvocadas,
        tipoDiagnostico,
        practicante,
        supervisorN,
        opcionEscogida,
        diagnosticoPrincipalSession,
        diagnosticoSecundarioSession

        }

         const urlEnvio = `/api/historias-clinicas/${HC_id}`
         const method = 'PATCH'
         const sesion = body
         var historial = {
             datos_sesion: body,
             cerrado: false,
             closePrimeraVez: true
         }
        
        $.ajax({
                 url: urlEnvio,
                 type: method,
                 data: historial,
                 dataType: 'json',
                 contentType: 'application/json',
                 data: JSON.stringify(historial),
            success: function (response) {



                event.preventDefault();
                Materialize.toast('Historia Guardada con √©xito.', 4000, 'rounded green')
                console.log(historial)
                setTimeout(function () {
                    location.reload();
               }, 2000);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                const errors = jqXHR.responseJSON.error.errors;
                let htmlErrors = "";
                for (const err in errors) {
                    if (errors.hasOwnProperty(err)) {
                        const error = errors[err];
                        htmlErrors += `<br>${error.message}`
                    }
                }
                console.log(textStatus);
                console.log(errorThrown);
                Materialize.toast(
                    `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                    10000, 'rounded red');
            }
        })
    }
    /*Traemos el super */
    var supervisao = <%-JSON.stringify(Cita.Profesional.supervisorAsign) || "{}" %>;
    $.ajax({
        method: 'GET',
        url: `/api/profesionales/getAllSupervisores/${sede_id}/${supervisao}`,
        success: function (r){
         console.log("TOMA TU SUPER", r)
         var firmaPro = r
         $("#superFirma").html(`
         <img src="${firmaPro.foto_firma != null ? firmaPro.foto_firma.location : 'https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Imagen_no_disponible.svg/600px-Imagen_no_disponible.svg.png'}"
         alt="" class="materialboxed" style="width:50%" >
         `)

        } 
    })
      /* Obtener Documentos */
      $.ajax({
          method: 'GET',
          url: `/api/carguedocumento/getDocumentos/${sede_id}/${paciente_id}`,
          success: function (r) {
              console.log(">>>> terapeuta: ", r)    
              for(let j = 0; j < r.length; j++){
                  if(r[j].tipoDocumento === 'GeoGrama'){
                    $("#table_documentPacientGeo").append(`
                          <tr class='tabrow closed'>
                              <td>
                               Ya existe Un documento
                              </td>
                              <td>
                                <button data-target="modal_${j}" class="btn edit_data modal-trigger waves-effect btn-flat col m12 m12 s12 btn waves-effect primary waves-light">Abrir</button>
                                <div id="modal_${j}" class="modal modal-fixed-footer">
                                  <div class="modal-content">
                                    <img src="${r[j].urlDocumento}"
                                        alt="" class="materialboxed"
                                        style="width:100%">
                                  </div>
                                <div class="modal-footer">
                                  <a class="modal-action edit_close modal-close waves-effect waves-green btn-flat ">Close</a>
                                </div>
                              </td>
                          </tr>`)
                  
                  $(document).on('click', '.edit_data', function () {
                    $('.modal').modal();
                    $(`#modal_${j}`).openModal;
                  });
                  $(document).on('click', '.edit_close', function () {
                    $('.modal').modal();
                    $(`#modal_${j}`).close;
                  });

                  }
              }
          }
      })
      function cupsData (){
                const urlEnvio = `/api/remision/`
                const methodEnvio = 'POST'
                var cupsArray = []
                var contadorCups = 0
                $("#table_cups > tr").each(function () {
                         let cupsSelect
                        cupsSelect = $("#cups_" + contadorCups).val();
                        contadorCups++;
                        cupsArray.push(cupsSelect)
                });
                var motivoRemision = $("#motivoRemision").val()
                var diagnosticoPrincipalRemi = $("#diagnosticoPrincipalRemi").val()
                var diagnosticoSegundarioRemi = $("#diagnosticoSegundarioRemi").val()
                var Observaciones = $("#Observaciones").val()
                var fechaRemision = new Date()
                var Sede = $('#sede_id').val();
                var Paciente = $('#paciente_id').val();
                var Profesional = $('#profesional_id').val();
                const Data_cups = {
                    cupsArray,
                    motivoRemision,
                    motivoRemision,
                    diagnosticoPrincipalRemi,
                    diagnosticoSegundarioRemi,
                    Observaciones,
                    fechaRemision,
                    Sede,
                    Paciente,
                    Profesional
                }
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(Data_cups),
                    success: function () {
                        Materialize.toast('Remision Cuardada.', 4000, 'rounded green')
                        $("#modal_remision").empty()
                        $("#modal_remision").modal('close')
                        setTimeout(function () {
                                location.href = '#';
                        }, 2000);

                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
                
                
                 
            }   
            function saveMotivoConsultaProfesional() {
        const fecha = new Date()
        const cita = <%-JSON.stringify(Cita)%>;
        var usuario = <%-JSON.stringify(user)%>;
        var tipoUsuario = usuario.roles
        console.log(tipoUsuario)
        var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido
        if (tipoUsuario== 'SP'){
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "motivoConsulta",
            fechaSystem: fecha,
            comentarioProfe: $("#value_modal_motivoConsulta").val(),
            name: nombreMensaje
        }
        
        }else{
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "motivoConsulta",
            fechaSystem: fecha,
            comentario: $("#value_modal_motivoConsulta").val(),
            name: nombreMensaje
        }
        }


        
        $.ajax({
                url: "/api/citas/insertCommentSave",
                type: "POST",
                data: data,
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(data),
            success: function (response) {
                console.log(response);
                Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
                setTimeout(function () {
                   // location.href = `/citas?sede=${sede_id}`
                }, 2000);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                const errors = jqXHR.responseJSON.error.errors;
                let htmlErrors = "";
                for (const err in errors) {
                    if (errors.hasOwnProperty(err)) {
                        const error = errors[err];
                        htmlErrors += `<br>${error.message}`
                    }
                }
                console.log(textStatus);
                console.log(errorThrown);
                Materialize.toast(
                    `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                    10000, 'rounded red');
            }
        });
    
    }

    function saveCaracteristicasProfesional() {

        const fecha = new Date()
        const cita = <%-JSON.stringify(Cita)%>;
        var usuario = <%-JSON.stringify(user)%>;
        var tipoUsuario = usuario.roles
        var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido
        console.log(tipoUsuario)
        if (tipoUsuario== 'SP'){
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "caracteristicas",
            fechaSystem: fecha,
            comentarioProfe: $("#value_modal_Caracteristicas").val(),
            name: nombreMensaje
        }
        
        }else{
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "caracteristicas",
            fechaSystem: fecha,
            comentario: $("#value_modal_Caracteristicas").val(),
            name: nombreMensaje
        }
        }


        
        $.ajax({
                url: "/api/citas/insertCommentSave",
                type: "POST",
                data: data,
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(data),
            success: function (response) {
                console.log(response);
                Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
                setTimeout(function () {
                   // location.href = `/citas?sede=${sede_id}`
                }, 2000);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                const errors = jqXHR.responseJSON.error.errors;
                let htmlErrors = "";
                for (const err in errors) {
                    if (errors.hasOwnProperty(err)) {
                        const error = errors[err];
                        htmlErrors += `<br>${error.message}`
                    }
                }
                console.log(textStatus);
                console.log(errorThrown);
                Materialize.toast(
                    `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                    10000, 'rounded red');
            }
        });

        }
        
            function saveCaracteristicasSocioProfesional() {

        const fecha = new Date()
        const cita = <%-JSON.stringify(Cita)%>;
        var usuario = <%-JSON.stringify(user)%>;
        var tipoUsuario = usuario.roles
        var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido

        console.log(tipoUsuario)
        if (tipoUsuario== 'SP'){
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "caracteristicasSocio",
            fechaSystem: fecha,
            comentarioProfe: $("#value_modal_CaracteristicasSocio").val(),
            name: nombreMensaje
        }

        }else{
            var data = {
            sede: cita.Sede._id,
            Paciente: [cita.Paciente[0]._id],
            Cita: [cita._id],
            Profesional: [cita.Profesional._id],
            headComment: "caracteristicasSocio",
            fechaSystem: fecha,
            comentario: $("#value_modal_CaracteristicasSocio").val(),
            name: nombreMensaje
        }
        }



        $.ajax({
                url: "/api/citas/insertCommentSave",
                type: "POST",
                data: data,
                dataType: 'json',
                contentType: 'application/json',
                data: JSON.stringify(data),
            success: function (response) {
                console.log(response);
                Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
                setTimeout(function () {
                // location.href = `/citas?sede=${sede_id}`
                }, 2000);
            },
            error: function (jqXHR, textStatus, errorThrown) {
                const errors = jqXHR.responseJSON.error.errors;
                let htmlErrors = "";
                for (const err in errors) {
                    if (errors.hasOwnProperty(err)) {
                        const error = errors[err];
                        htmlErrors += `<br>${error.message}`
                    }
                }
                console.log(textStatus);
                console.log(errorThrown);
                Materialize.toast(
                    `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                    10000, 'rounded red');
            }
        });

        }
        function saveCicloProfesional() {

const fecha = new Date()
const cita = <%-JSON.stringify(Cita)%>;
var usuario = <%-JSON.stringify(user)%>;
var tipoUsuario = usuario.roles
var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido

console.log(tipoUsuario)
if (tipoUsuario== 'SP'){
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "ciclo",
    fechaSystem: fecha,
    comentarioProfe: $("#value_modal_ciclo").val(),
    name: nombreMensaje
}



}else{
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "ciclo",
    fechaSystem: fecha,
    comentario: $("#value_modal_ciclo").val(),
    name: nombreMensaje
}
}



$.ajax({
        url: "/api/citas/insertCommentSave",
        type: "POST",
        data: data,
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify(data),
    success: function (response) {
        console.log(response);
        Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
        setTimeout(function () {
        // location.href = `/citas?sede=${sede_id}`
        }, 2000);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        const errors = jqXHR.responseJSON.error.errors;
        let htmlErrors = "";
        for (const err in errors) {
            if (errors.hasOwnProperty(err)) {
                const error = errors[err];
                htmlErrors += `<br>${error.message}`
            }
        }
        console.log(textStatus);
        console.log(errorThrown);
        Materialize.toast(
            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
            10000, 'rounded red');
    }
});

}
function saveEvaluacionProfesional() {

const fecha = new Date()
const cita = <%-JSON.stringify(Cita)%>;
var usuario = <%-JSON.stringify(user)%>;
var tipoUsuario = usuario.roles
var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido

console.log(tipoUsuario)
if (tipoUsuario== 'SP'){
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "evaluacion",
    fechaSystem: fecha,
    comentarioProfe: $("#value_modal_evaluacion").val(),
    name: nombreMensaje
}



}else{
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "evaluacion",
    fechaSystem: fecha,
    comentario: $("#value_modal_evaluacion").val(),
    name: nombreMensaje
}
}



$.ajax({
        url: "/api/citas/insertCommentSave",
        type: "POST",
        data: data,
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify(data),
    success: function (response) {
        console.log(response);
        Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
        setTimeout(function () {
        // location.href = `/citas?sede=${sede_id}`
        }, 2000);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        const errors = jqXHR.responseJSON.error.errors;
        let htmlErrors = "";
        for (const err in errors) {
            if (errors.hasOwnProperty(err)) {
                const error = errors[err];
                htmlErrors += `<br>${error.message}`
            }
        }
        console.log(textStatus);
        console.log(errorThrown);
        Materialize.toast(
            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
            10000, 'rounded red');
    }
});

}
function saveProcesoProfesional() {

const fecha = new Date()
const cita = <%-JSON.stringify(Cita)%>;
var usuario = <%-JSON.stringify(user)%>;
var tipoUsuario = usuario.roles
var nombreMensaje = usuario.primer_nombre + " " + usuario.primer_apellido

console.log(tipoUsuario)
if (tipoUsuario== 'SP'){
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "proceso",
    fechaSystem: fecha,
    comentarioProfe: $("#value_modal_proceso").val(),
    name: nombreMensaje
}



}else{
    var data = {
    sede: cita.Sede._id,
    Paciente: [cita.Paciente[0]._id],
    Cita: [cita._id],
    Profesional: [cita.Profesional._id],
    headComment: "proceso",
    fechaSystem: fecha,
    comentario: $("#value_modal_proceso").val(),
    name: nombreMensaje
}
}



$.ajax({
        url: "/api/citas/insertCommentSave",
        type: "POST",
        data: data,
        dataType: 'json',
        contentType: 'application/json',
        data: JSON.stringify(data),
    success: function (response) {
        console.log(response);
        Materialize.toast('Comentario Guardado con √©xito.', 4000, 'rounded green')
        setTimeout(function () {
        // location.href = `/citas?sede=${sede_id}`
        }, 2000);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        const errors = jqXHR.responseJSON.error.errors;
        let htmlErrors = "";
        for (const err in errors) {
            if (errors.hasOwnProperty(err)) {
                const error = errors[err];
                htmlErrors += `<br>${error.message}`
            }
        }
        console.log(textStatus);
        console.log(errorThrown);
        Materialize.toast(
            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
            10000, 'rounded red');
    }
});

}
function AprobarCitaSuper(dato){
                console.log(dato)
                switch(dato){
                case 'aprobadoMotivoConsul':
                editarCita = {
                    aprobadoMotivoConsul: true
                }
                    break;
                case 'aprobadoCaracteristica':
                editarCita = {
                    aprobadoCaracteristica: true
                }
                    break;
                case 'aprobadoCaracteristicaSocio':
                editarCita = {
                    aprobadoCaracteristicaSocio: true
                }
                    break;   
                case 'aprobadoCiclo':
                editarCita = {
                    aprobadoCiclo: true
                }
                    break; 
                case 'aprobadoEvaluacion':
                editarCita = {
                    aprobadoEvaluacion: true
                }
                break; 
                case 'aprobadoProceso':
                editarCita = {
                    aprobadoProceso: true
                }
                break;
                case 'aprobadoSesiones': 
                editarCita = {
                    aprobadoSesiones: true
                }
                break;
                default:
                return;
                 
                }
                let cita_id = new URLSearchParams(window.location.search).get('cita');
                let urlEnvio = `/api/citas/${cita_id}`
                let methodEnvio = 'PATCH'
                $.ajax({
                    url: urlEnvio,
                    method: methodEnvio,
                    dataType: 'json',
                    contentType: 'application/json',
                    data: JSON.stringify(editarCita),
                    success: function () {
                        Materialize.toast('Aprobado con exito', 4000, 'rounded green')
                        setTimeout(function () {
                       window.location.reload()
                       }, 2000);
                    },
                    error: function (a, b, c) {
                        console.log(a, b, c);
                        Materialize.toast(
                            'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                            4000, 'rounded red');
                    }
                })
}
function DesaAprobarCitaSuper(dato){
    var usuario = <%-JSON.stringify(user)%>;
    var tipoUsuario = usuario.roles
    if(tipoUsuario == "PG"){
        return
    }
    var confi = confirm("¬øSeguro que quieres quitar la aprovaci√≥n?")
    if(confi){
    switch(dato){
        case 'aprobadoMotivoConsul':
        editarCita = {
            aprobadoMotivoConsul: false
        }
            break;
        case 'aprobadoCaracteristica':
        editarCita = {
            aprobadoCaracteristica: false
        }
            break;
        case 'aprobadoCaracteristicaSocio':
        editarCita = {
            aprobadoCaracteristicaSocio: false
        }
            break;   
        case 'aprobadoCiclo':
        editarCita = {
            aprobadoCiclo: false
        }
            break; 
        case 'aprobadoEvaluacion':
        editarCita = {
            aprobadoEvaluacion: false
        }
        break; 
        case 'aprobadoProceso':
        editarCita = {
            aprobadoProceso: false
        }
        break;
        case 'aprobadoSesiones': 
        editarCita = {
            aprobadoSesiones: false
        }
        break;
        default:
        return;
            
        }
        let cita_id = new URLSearchParams(window.location.search).get('cita');
        let urlEnvio = `/api/citas/${cita_id}`
        let methodEnvio = 'PATCH'
        $.ajax({
            url: urlEnvio,
            method: methodEnvio,
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify(editarCita),
            success: function () {  
                reabrirHistory()
            },
            error: function (a, b, c) {
                console.log(a, b, c);
                Materialize.toast(
                    'Hubo un error en los datos proporcionados. Verifica e int√©ntalo de nuevo.',
                    4000, 'rounded red');
            }
        })
    }
} 
function reabrirHistory(){
    var HC_id = $('#hc_id').val();
    const urlEnvio = `/api/historias-clinicas/${HC_id}`
                const method = 'PATCH'
                var historial = {
                    cerrado: false,

                }
                
                console.log((historial))
                $.ajax({
                        url: urlEnvio,
                        type: method,
                        dataType: 'json',
                        contentType: 'application/json',
                        data: JSON.stringify(historial),
                    success: function (response) {
                        console.log(response);
                        Materialize.toast('Historia reabierta con √©xito.', 4000, 'rounded green')
                        window.location.reload()
                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        const errors = jqXHR.responseJSON.error.errors;
                        let htmlErrors = "";
                        for (const err in errors) {
                            if (errors.hasOwnProperty(err)) {
                                const error = errors[err];
                                htmlErrors += `<br>${error.message}`
                            }
                        }
                        console.log(textStatus);
                        console.log(errorThrown);
                        Materialize.toast(
                            `Hubo un error en los datos proporcionados.<br>Verificar e Intentar de nuevo.<br>${htmlErrors}`,
                            10000, 'rounded red');
                    }
                })
}
</script>


<% include  ../../view_distribution/bot2.ejs%>